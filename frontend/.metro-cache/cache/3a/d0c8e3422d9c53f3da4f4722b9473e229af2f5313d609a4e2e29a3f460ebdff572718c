{"dependencies":[{"name":"../util/TickUtils","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":17,"index":221},"end":{"line":8,"column":45,"index":249}}],"key":"JqqYjZ+9iyvh5fjxhs4u+5shgEg=","exportNames":["*"],"imports":1}},{"name":"../util/getEveryNth","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":9,"column":19,"index":270},"end":{"line":9,"column":49,"index":300}}],"key":"Gj9atkrH0Me7QmLMxpilk/EkxRE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.getEquidistantPreserveEndTicks = getEquidistantPreserveEndTicks;\n  exports.getEquidistantTicks = getEquidistantTicks;\n  var _TickUtils = require(_dependencyMap[0], \"../util/TickUtils\");\n  var _getEveryNth = require(_dependencyMap[1], \"../util/getEveryNth\");\n  function getEquidistantTicks(sign, boundaries, getTickSize, ticks, minTickGap) {\n    // If the ticks are readonly, then the slice might not be necessary\n    var result = (ticks || []).slice();\n    var {\n      start: initialStart,\n      end\n    } = boundaries;\n    var index = 0;\n    // Premature optimisation idea 1: Estimate a lower bound, and start from there.\n    // For now, start from every tick\n    var stepsize = 1;\n    var start = initialStart;\n    var _loop = function _loop() {\n        // Given stepsize, evaluate whether every stepsize-th tick can be shown.\n        // If it can not, then increase the stepsize by 1, and try again.\n\n        var entry = ticks === null || ticks === void 0 ? void 0 : ticks[index];\n\n        // Break condition - If we have evaluated all the ticks, then we are done.\n        if (entry === undefined) {\n          return {\n            v: (0, _getEveryNth.getEveryNth)(ticks, stepsize)\n          };\n        }\n\n        // Check if the element collides with the next element\n        var i = index;\n        var size;\n        var getSize = () => {\n          if (size === undefined) {\n            size = getTickSize(entry, i);\n          }\n          return size;\n        };\n        var tickCoord = entry.coordinate;\n        // We will always show the first tick.\n        var isShow = index === 0 || (0, _TickUtils.isVisible)(sign, tickCoord, getSize, start, end);\n        if (!isShow) {\n          // Start all over with a larger stepsize\n          index = 0;\n          start = initialStart;\n          stepsize += 1;\n        }\n        if (isShow) {\n          // If it can be shown, update the start\n          start = tickCoord + sign * (getSize() / 2 + minTickGap);\n          index += stepsize;\n        }\n      },\n      _ret;\n    while (stepsize <= result.length) {\n      _ret = _loop();\n      if (_ret) return _ret.v;\n    }\n    return [];\n  }\n  function getEquidistantPreserveEndTicks(sign, boundaries, getTickSize, ticks, minTickGap) {\n    // If the ticks are readonly, then the slice might not be necessary\n    // Reworked logic for getEquidistantPreserveEndTicks\n    var result = (ticks || []).slice();\n    var len = result.length;\n    if (len === 0) {\n      return [];\n    }\n    var {\n      start: initialStart,\n      end\n    } = boundaries;\n\n    // Start with stepsize = 1 (every tick) up to the maximum possible stepsize (len)\n    for (var stepsize = 1; stepsize <= len; stepsize++) {\n      // 1. Calculate the offset so the last tick (index len - 1) is always included in the sequence.\n      var offset = (len - 1) % stepsize;\n      var start = initialStart; // `start` tracks the coordinate of the last successfully drawn tick + gap\n      var ok = true;\n\n      // 2. Iterate through the end-anchored sequence: offset, offset + stepsize, ..., len - 1\n      var _loop2 = function _loop2() {\n          var entry = ticks[index];\n          if (entry == null) {\n            return 0; // continue\n          }\n          var i = index;\n          var size;\n\n          // Use a function to get size, as in the original code\n          var getSize = () => {\n            if (size === undefined) {\n              size = getTickSize(entry, i);\n            }\n            return size;\n          };\n          var tickCoord = entry.coordinate;\n\n          // 3. Apply visibility logic (including the first tick special case)\n          // The reviewer says *not* to unconditionally bypass checks for the last tick.\n          var isShow = index === offset || (0, _TickUtils.isVisible)(sign, tickCoord, getSize, start, end);\n          if (!isShow) {\n            // If any tick in this end-anchored sequence fails visibility/collision,\n            // reject this stepsize and move to the next iteration (larger stepsize).\n            ok = false;\n            return 1; // break\n          }\n\n          // 4. If showable, update the 'start' coordinate for the next collision check\n          if (isShow) {\n            start = tickCoord + sign * (getSize() / 2 + minTickGap);\n          }\n        },\n        _ret2;\n      for (var index = offset; index < len; index += stepsize) {\n        _ret2 = _loop2();\n        if (_ret2 === 0) continue;\n        if (_ret2 === 1) break;\n      }\n\n      // 5. If the entire sequence for this stepsize passed the visibility check, return the result\n      if (ok) {\n        // Build the final result array explicitly using the validated stepsize and offset.\n        var finalTicks = [];\n        for (var _index = offset; _index < len; _index += stepsize) {\n          var tick = ticks[_index];\n          if (tick != null) {\n            finalTicks.push(tick);\n          }\n        }\n        return finalTicks;\n      }\n    }\n\n    // If no stepsize works (this shouldn't happen unless minTickGap is huge), return an empty array.\n    return [];\n  }\n});","lineCount":144,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0,"Object"],[4,8,3,6],[4,9,3,7,"defineProperty"],[4,23,3,21],[4,24,3,22,"exports"],[4,31,3,29],[4,33,3,31],[4,45,3,43],[4,47,3,45],[5,4,4,2,"value"],[5,9,4,7],[5,11,4,9],[6,2,5,0],[6,3,5,1],[6,4,5,2],[7,2,6,0,"exports"],[7,9,6,7],[7,10,6,8,"getEquidistantPreserveEndTicks"],[7,40,6,38],[7,43,6,41,"getEquidistantPreserveEndTicks"],[7,73,6,71],[8,2,7,0,"exports"],[8,9,7,7],[8,10,7,8,"getEquidistantTicks"],[8,29,7,27],[8,32,7,30,"getEquidistantTicks"],[8,51,7,49],[9,2,8,0],[9,6,8,4,"_TickUtils"],[9,16,8,14],[9,19,8,17,"require"],[9,26,8,24],[9,27,8,24,"_dependencyMap"],[9,41,8,24],[9,65,8,44],[9,66,8,45],[10,2,9,0],[10,6,9,4,"_getEveryNth"],[10,18,9,16],[10,21,9,19,"require"],[10,28,9,26],[10,29,9,26,"_dependencyMap"],[10,43,9,26],[10,69,9,48],[10,70,9,49],[11,2,10,0],[11,11,10,9,"getEquidistantTicks"],[11,30,10,28,"getEquidistantTicks"],[11,31,10,29,"sign"],[11,35,10,33],[11,37,10,35,"boundaries"],[11,47,10,45],[11,49,10,47,"getTickSize"],[11,60,10,58],[11,62,10,60,"ticks"],[11,67,10,65],[11,69,10,67,"minTickGap"],[11,79,10,77],[11,81,10,79],[12,4,11,2],[13,4,12,2],[13,8,12,6,"result"],[13,14,12,12],[13,17,12,15],[13,18,12,16,"ticks"],[13,23,12,21],[13,27,12,25],[13,29,12,27],[13,31,12,29,"slice"],[13,36,12,34],[13,37,12,35],[13,38,12,36],[14,4,13,2],[14,8,13,6],[15,6,14,4,"start"],[15,11,14,9],[15,13,14,11,"initialStart"],[15,25,14,23],[16,6,15,4,"end"],[17,4,16,2],[17,5,16,3],[17,8,16,6,"boundaries"],[17,18,16,16],[18,4,17,2],[18,8,17,6,"index"],[18,13,17,11],[18,16,17,14],[18,17,17,15],[19,4,18,2],[20,4,19,2],[21,4,20,2],[21,8,20,6,"stepsize"],[21,16,20,14],[21,19,20,17],[21,20,20,18],[22,4,21,2],[22,8,21,6,"start"],[22,13,21,11],[22,16,21,14,"initialStart"],[22,28,21,26],[23,4,22,2],[23,8,22,6,"_loop"],[23,13,22,11],[23,16,22,14],[23,25,22,23,"_loop"],[23,30,22,28,"_loop"],[23,31,22,28],[23,33,22,31],[24,8,23,6],[25,8,24,6],[27,8,26,6],[27,12,26,10,"entry"],[27,17,26,15],[27,20,26,18,"ticks"],[27,25,26,23],[27,30,26,28],[27,34,26,32],[27,38,26,36,"ticks"],[27,43,26,41],[27,48,26,46],[27,53,26,51],[27,54,26,52],[27,57,26,55],[27,62,26,60],[27,63,26,61],[27,66,26,64,"ticks"],[27,71,26,69],[27,72,26,70,"index"],[27,77,26,75],[27,78,26,76],[29,8,28,6],[30,8,29,6],[30,12,29,10,"entry"],[30,17,29,15],[30,22,29,20,"undefined"],[30,31,29,29],[30,33,29,31],[31,10,30,8],[31,17,30,15],[32,12,31,10,"v"],[32,13,31,11],[32,15,31,13],[32,16,31,14],[32,17,31,15],[32,19,31,17,"_getEveryNth"],[32,31,31,29],[32,32,31,30,"getEveryNth"],[32,43,31,41],[32,45,31,43,"ticks"],[32,50,31,48],[32,52,31,50,"stepsize"],[32,60,31,58],[33,10,32,8],[33,11,32,9],[34,8,33,6],[36,8,35,6],[37,8,36,6],[37,12,36,10,"i"],[37,13,36,11],[37,16,36,14,"index"],[37,21,36,19],[38,8,37,6],[38,12,37,10,"size"],[38,16,37,14],[39,8,38,6],[39,12,38,10,"getSize"],[39,19,38,17],[39,22,38,20,"getSize"],[39,23,38,20],[39,28,38,26],[40,10,39,8],[40,14,39,12,"size"],[40,18,39,16],[40,23,39,21,"undefined"],[40,32,39,30],[40,34,39,32],[41,12,40,10,"size"],[41,16,40,14],[41,19,40,17,"getTickSize"],[41,30,40,28],[41,31,40,29,"entry"],[41,36,40,34],[41,38,40,36,"i"],[41,39,40,37],[41,40,40,38],[42,10,41,8],[43,10,42,8],[43,17,42,15,"size"],[43,21,42,19],[44,8,43,6],[44,9,43,7],[45,8,44,6],[45,12,44,10,"tickCoord"],[45,21,44,19],[45,24,44,22,"entry"],[45,29,44,27],[45,30,44,28,"coordinate"],[45,40,44,38],[46,8,45,6],[47,8,46,6],[47,12,46,10,"isShow"],[47,18,46,16],[47,21,46,19,"index"],[47,26,46,24],[47,31,46,29],[47,32,46,30],[47,36,46,34],[47,37,46,35],[47,38,46,36],[47,40,46,38,"_TickUtils"],[47,50,46,48],[47,51,46,49,"isVisible"],[47,60,46,58],[47,62,46,60,"sign"],[47,66,46,64],[47,68,46,66,"tickCoord"],[47,77,46,75],[47,79,46,77,"getSize"],[47,86,46,84],[47,88,46,86,"start"],[47,93,46,91],[47,95,46,93,"end"],[47,98,46,96],[47,99,46,97],[48,8,47,6],[48,12,47,10],[48,13,47,11,"isShow"],[48,19,47,17],[48,21,47,19],[49,10,48,8],[50,10,49,8,"index"],[50,15,49,13],[50,18,49,16],[50,19,49,17],[51,10,50,8,"start"],[51,15,50,13],[51,18,50,16,"initialStart"],[51,30,50,28],[52,10,51,8,"stepsize"],[52,18,51,16],[52,22,51,20],[52,23,51,21],[53,8,52,6],[54,8,53,6],[54,12,53,10,"isShow"],[54,18,53,16],[54,20,53,18],[55,10,54,8],[56,10,55,8,"start"],[56,15,55,13],[56,18,55,16,"tickCoord"],[56,27,55,25],[56,30,55,28,"sign"],[56,34,55,32],[56,38,55,36,"getSize"],[56,45,55,43],[56,46,55,44],[56,47,55,45],[56,50,55,48],[56,51,55,49],[56,54,55,52,"minTickGap"],[56,64,55,62],[56,65,55,63],[57,10,56,8,"index"],[57,15,56,13],[57,19,56,17,"stepsize"],[57,27,56,25],[58,8,57,6],[59,6,58,4],[59,7,58,5],[60,6,59,4,"_ret"],[60,10,59,8],[61,4,60,2],[61,11,60,9,"stepsize"],[61,19,60,17],[61,23,60,21,"result"],[61,29,60,27],[61,30,60,28,"length"],[61,36,60,34],[61,38,60,36],[62,6,61,4,"_ret"],[62,10,61,8],[62,13,61,11,"_loop"],[62,18,61,16],[62,19,61,17],[62,20,61,18],[63,6,62,4],[63,10,62,8,"_ret"],[63,14,62,12],[63,16,62,14],[63,23,62,21,"_ret"],[63,27,62,25],[63,28,62,26,"v"],[63,29,62,27],[64,4,63,2],[65,4,64,2],[65,11,64,9],[65,13,64,11],[66,2,65,0],[67,2,66,0],[67,11,66,9,"getEquidistantPreserveEndTicks"],[67,41,66,39,"getEquidistantPreserveEndTicks"],[67,42,66,40,"sign"],[67,46,66,44],[67,48,66,46,"boundaries"],[67,58,66,56],[67,60,66,58,"getTickSize"],[67,71,66,69],[67,73,66,71,"ticks"],[67,78,66,76],[67,80,66,78,"minTickGap"],[67,90,66,88],[67,92,66,90],[68,4,67,2],[69,4,68,2],[70,4,69,2],[70,8,69,6,"result"],[70,14,69,12],[70,17,69,15],[70,18,69,16,"ticks"],[70,23,69,21],[70,27,69,25],[70,29,69,27],[70,31,69,29,"slice"],[70,36,69,34],[70,37,69,35],[70,38,69,36],[71,4,70,2],[71,8,70,6,"len"],[71,11,70,9],[71,14,70,12,"result"],[71,20,70,18],[71,21,70,19,"length"],[71,27,70,25],[72,4,71,2],[72,8,71,6,"len"],[72,11,71,9],[72,16,71,14],[72,17,71,15],[72,19,71,17],[73,6,72,4],[73,13,72,11],[73,15,72,13],[74,4,73,2],[75,4,74,2],[75,8,74,6],[76,6,75,4,"start"],[76,11,75,9],[76,13,75,11,"initialStart"],[76,25,75,23],[77,6,76,4,"end"],[78,4,77,2],[78,5,77,3],[78,8,77,6,"boundaries"],[78,18,77,16],[80,4,79,2],[81,4,80,2],[81,9,80,7],[81,13,80,11,"stepsize"],[81,21,80,19],[81,24,80,22],[81,25,80,23],[81,27,80,25,"stepsize"],[81,35,80,33],[81,39,80,37,"len"],[81,42,80,40],[81,44,80,42,"stepsize"],[81,52,80,50],[81,54,80,52],[81,56,80,54],[82,6,81,4],[83,6,82,4],[83,10,82,8,"offset"],[83,16,82,14],[83,19,82,17],[83,20,82,18,"len"],[83,23,82,21],[83,26,82,24],[83,27,82,25],[83,31,82,29,"stepsize"],[83,39,82,37],[84,6,83,4],[84,10,83,8,"start"],[84,15,83,13],[84,18,83,16,"initialStart"],[84,30,83,28],[84,31,83,29],[84,32,83,30],[85,6,84,4],[85,10,84,8,"ok"],[85,12,84,10],[85,15,84,13],[85,19,84,17],[87,6,86,4],[88,6,87,4],[88,10,87,8,"_loop2"],[88,16,87,14],[88,19,87,17],[88,28,87,26,"_loop2"],[88,34,87,32,"_loop2"],[88,35,87,32],[88,37,87,35],[89,10,88,8],[89,14,88,12,"entry"],[89,19,88,17],[89,22,88,20,"ticks"],[89,27,88,25],[89,28,88,26,"index"],[89,33,88,31],[89,34,88,32],[90,10,89,8],[90,14,89,12,"entry"],[90,19,89,17],[90,23,89,21],[90,27,89,25],[90,29,89,27],[91,12,90,10],[91,19,90,17],[91,20,90,18],[91,21,90,19],[91,22,90,20],[92,10,91,8],[93,10,92,8],[93,14,92,12,"i"],[93,15,92,13],[93,18,92,16,"index"],[93,23,92,21],[94,10,93,8],[94,14,93,12,"size"],[94,18,93,16],[96,10,95,8],[97,10,96,8],[97,14,96,12,"getSize"],[97,21,96,19],[97,24,96,22,"getSize"],[97,25,96,22],[97,30,96,28],[98,12,97,10],[98,16,97,14,"size"],[98,20,97,18],[98,25,97,23,"undefined"],[98,34,97,32],[98,36,97,34],[99,14,98,12,"size"],[99,18,98,16],[99,21,98,19,"getTickSize"],[99,32,98,30],[99,33,98,31,"entry"],[99,38,98,36],[99,40,98,38,"i"],[99,41,98,39],[99,42,98,40],[100,12,99,10],[101,12,100,10],[101,19,100,17,"size"],[101,23,100,21],[102,10,101,8],[102,11,101,9],[103,10,102,8],[103,14,102,12,"tickCoord"],[103,23,102,21],[103,26,102,24,"entry"],[103,31,102,29],[103,32,102,30,"coordinate"],[103,42,102,40],[105,10,104,8],[106,10,105,8],[107,10,106,8],[107,14,106,12,"isShow"],[107,20,106,18],[107,23,106,21,"index"],[107,28,106,26],[107,33,106,31,"offset"],[107,39,106,37],[107,43,106,41],[107,44,106,42],[107,45,106,43],[107,47,106,45,"_TickUtils"],[107,57,106,55],[107,58,106,56,"isVisible"],[107,67,106,65],[107,69,106,67,"sign"],[107,73,106,71],[107,75,106,73,"tickCoord"],[107,84,106,82],[107,86,106,84,"getSize"],[107,93,106,91],[107,95,106,93,"start"],[107,100,106,98],[107,102,106,100,"end"],[107,105,106,103],[107,106,106,104],[108,10,107,8],[108,14,107,12],[108,15,107,13,"isShow"],[108,21,107,19],[108,23,107,21],[109,12,108,10],[110,12,109,10],[111,12,110,10,"ok"],[111,14,110,12],[111,17,110,15],[111,22,110,20],[112,12,111,10],[112,19,111,17],[112,20,111,18],[112,21,111,19],[112,22,111,20],[113,10,112,8],[115,10,114,8],[116,10,115,8],[116,14,115,12,"isShow"],[116,20,115,18],[116,22,115,20],[117,12,116,10,"start"],[117,17,116,15],[117,20,116,18,"tickCoord"],[117,29,116,27],[117,32,116,30,"sign"],[117,36,116,34],[117,40,116,38,"getSize"],[117,47,116,45],[117,48,116,46],[117,49,116,47],[117,52,116,50],[117,53,116,51],[117,56,116,54,"minTickGap"],[117,66,116,64],[117,67,116,65],[118,10,117,8],[119,8,118,6],[119,9,118,7],[120,8,119,6,"_ret2"],[120,13,119,11],[121,6,120,4],[121,11,120,9],[121,15,120,13,"index"],[121,20,120,18],[121,23,120,21,"offset"],[121,29,120,27],[121,31,120,29,"index"],[121,36,120,34],[121,39,120,37,"len"],[121,42,120,40],[121,44,120,42,"index"],[121,49,120,47],[121,53,120,51,"stepsize"],[121,61,120,59],[121,63,120,61],[122,8,121,6,"_ret2"],[122,13,121,11],[122,16,121,14,"_loop2"],[122,22,121,20],[122,23,121,21],[122,24,121,22],[123,8,122,6],[123,12,122,10,"_ret2"],[123,17,122,15],[123,22,122,20],[123,23,122,21],[123,25,122,23],[124,8,123,6],[124,12,123,10,"_ret2"],[124,17,123,15],[124,22,123,20],[124,23,123,21],[124,25,123,23],[125,6,124,4],[127,6,126,4],[128,6,127,4],[128,10,127,8,"ok"],[128,12,127,10],[128,14,127,12],[129,8,128,6],[130,8,129,6],[130,12,129,10,"finalTicks"],[130,22,129,20],[130,25,129,23],[130,27,129,25],[131,8,130,6],[131,13,130,11],[131,17,130,15,"_index"],[131,23,130,21],[131,26,130,24,"offset"],[131,32,130,30],[131,34,130,32,"_index"],[131,40,130,38],[131,43,130,41,"len"],[131,46,130,44],[131,48,130,46,"_index"],[131,54,130,52],[131,58,130,56,"stepsize"],[131,66,130,64],[131,68,130,66],[132,10,131,8],[132,14,131,12,"tick"],[132,18,131,16],[132,21,131,19,"ticks"],[132,26,131,24],[132,27,131,25,"_index"],[132,33,131,31],[132,34,131,32],[133,10,132,8],[133,14,132,12,"tick"],[133,18,132,16],[133,22,132,20],[133,26,132,24],[133,28,132,26],[134,12,133,10,"finalTicks"],[134,22,133,20],[134,23,133,21,"push"],[134,27,133,25],[134,28,133,26,"tick"],[134,32,133,30],[134,33,133,31],[135,10,134,8],[136,8,135,6],[137,8,136,6],[137,15,136,13,"finalTicks"],[137,25,136,23],[138,6,137,4],[139,4,138,2],[141,4,140,2],[142,4,141,2],[142,11,141,9],[142,13,141,11],[143,2,142,0],[144,0,142,1],[144,3]],"functionMap":{"names":["<global>","getEquidistantTicks","_loop","getSize","getEquidistantPreserveEndTicks","_loop2"],"mappings":"AAA;ACS;cCY;oBCgB;ODK;KDe;CDO;AIC;iBCqB;sBFS;SEK;ODiB"},"hasCjsExports":true},"type":"js/module"}]}