{"dependencies":[{"name":"../util/TickUtils","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":46,"index":46}}],"key":"N3LWQQBG3JMaxaDR5myxLVqC8PE=","exportNames":["*"],"imports":1}},{"name":"../util/getEveryNth","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":47},"end":{"line":2,"column":50,"index":97}}],"key":"ROQNStXra0nfl+eYFiWjgodtsnw=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.getEquidistantTicks = getEquidistantTicks;\n  exports.getEquidistantPreserveEndTicks = getEquidistantPreserveEndTicks;\n  var _utilTickUtils = require(_dependencyMap[0], \"../util/TickUtils\");\n  var _utilGetEveryNth = require(_dependencyMap[1], \"../util/getEveryNth\");\n  function getEquidistantTicks(sign, boundaries, getTickSize, ticks, minTickGap) {\n    // If the ticks are readonly, then the slice might not be necessary\n    var result = (ticks || []).slice();\n    var {\n      start: initialStart,\n      end\n    } = boundaries;\n    var index = 0;\n    // Premature optimisation idea 1: Estimate a lower bound, and start from there.\n    // For now, start from every tick\n    var stepsize = 1;\n    var start = initialStart;\n    var _loop = function _loop() {\n        // Given stepsize, evaluate whether every stepsize-th tick can be shown.\n        // If it can not, then increase the stepsize by 1, and try again.\n\n        var entry = ticks === null || ticks === void 0 ? void 0 : ticks[index];\n\n        // Break condition - If we have evaluated all the ticks, then we are done.\n        if (entry === undefined) {\n          return {\n            v: (0, _utilGetEveryNth.getEveryNth)(ticks, stepsize)\n          };\n        }\n\n        // Check if the element collides with the next element\n        var i = index;\n        var size;\n        var getSize = () => {\n          if (size === undefined) {\n            size = getTickSize(entry, i);\n          }\n          return size;\n        };\n        var tickCoord = entry.coordinate;\n        // We will always show the first tick.\n        var isShow = index === 0 || (0, _utilTickUtils.isVisible)(sign, tickCoord, getSize, start, end);\n        if (!isShow) {\n          // Start all over with a larger stepsize\n          index = 0;\n          start = initialStart;\n          stepsize += 1;\n        }\n        if (isShow) {\n          // If it can be shown, update the start\n          start = tickCoord + sign * (getSize() / 2 + minTickGap);\n          index += stepsize;\n        }\n      },\n      _ret;\n    while (stepsize <= result.length) {\n      _ret = _loop();\n      if (_ret) return _ret.v;\n    }\n    return [];\n  }\n  function getEquidistantPreserveEndTicks(sign, boundaries, getTickSize, ticks, minTickGap) {\n    // If the ticks are readonly, then the slice might not be necessary\n    // Reworked logic for getEquidistantPreserveEndTicks\n    var result = (ticks || []).slice();\n    var len = result.length;\n    if (len === 0) {\n      return [];\n    }\n    var {\n      start: initialStart,\n      end\n    } = boundaries;\n\n    // Start with stepsize = 1 (every tick) up to the maximum possible stepsize (len)\n    for (var stepsize = 1; stepsize <= len; stepsize++) {\n      // 1. Calculate the offset so the last tick (index len - 1) is always included in the sequence.\n      var offset = (len - 1) % stepsize;\n      var start = initialStart; // `start` tracks the coordinate of the last successfully drawn tick + gap\n      var ok = true;\n\n      // 2. Iterate through the end-anchored sequence: offset, offset + stepsize, ..., len - 1\n      var _loop2 = function _loop2() {\n          var entry = ticks[index];\n          if (entry == null) {\n            return 0; // continue\n          }\n          var i = index;\n          var size;\n\n          // Use a function to get size, as in the original code\n          var getSize = () => {\n            if (size === undefined) {\n              size = getTickSize(entry, i);\n            }\n            return size;\n          };\n          var tickCoord = entry.coordinate;\n\n          // 3. Apply visibility logic (including the first tick special case)\n          // The reviewer says *not* to unconditionally bypass checks for the last tick.\n          var isShow = index === offset || (0, _utilTickUtils.isVisible)(sign, tickCoord, getSize, start, end);\n          if (!isShow) {\n            // If any tick in this end-anchored sequence fails visibility/collision,\n            // reject this stepsize and move to the next iteration (larger stepsize).\n            ok = false;\n            return 1; // break\n          }\n\n          // 4. If showable, update the 'start' coordinate for the next collision check\n          if (isShow) {\n            start = tickCoord + sign * (getSize() / 2 + minTickGap);\n          }\n        },\n        _ret2;\n      for (var index = offset; index < len; index += stepsize) {\n        _ret2 = _loop2();\n        if (_ret2 === 0) continue;\n        if (_ret2 === 1) break;\n      }\n\n      // 5. If the entire sequence for this stepsize passed the visibility check, return the result\n      if (ok) {\n        // Build the final result array explicitly using the validated stepsize and offset.\n        var finalTicks = [];\n        for (var _index = offset; _index < len; _index += stepsize) {\n          var tick = ticks[_index];\n          if (tick != null) {\n            finalTicks.push(tick);\n          }\n        }\n        return finalTicks;\n      }\n    }\n\n    // If no stepsize works (this shouldn't happen unless minTickGap is huge), return an empty array.\n    return [];\n  }\n});","lineCount":144,"map":[[7,2,3,0,"exports"],[7,9,3,0],[7,10,3,0,"getEquidistantTicks"],[7,29,3,0],[7,32,3,0,"getEquidistantTicks"],[7,51,3,0],[8,2,59,0,"exports"],[8,9,59,0],[8,10,59,0,"getEquidistantPreserveEndTicks"],[8,40,59,0],[8,43,59,0,"getEquidistantPreserveEndTicks"],[8,73,59,0],[9,2,1,0],[9,6,1,0,"_utilTickUtils"],[9,20,1,0],[9,23,1,0,"require"],[9,30,1,0],[9,31,1,0,"_dependencyMap"],[9,45,1,0],[10,2,2,0],[10,6,2,0,"_utilGetEveryNth"],[10,22,2,0],[10,25,2,0,"require"],[10,32,2,0],[10,33,2,0,"_dependencyMap"],[10,47,2,0],[11,2,3,7],[11,11,3,16,"getEquidistantTicks"],[11,30,3,35,"getEquidistantTicks"],[11,31,3,36,"sign"],[11,35,3,40],[11,37,3,42,"boundaries"],[11,47,3,52],[11,49,3,54,"getTickSize"],[11,60,3,65],[11,62,3,67,"ticks"],[11,67,3,72],[11,69,3,74,"minTickGap"],[11,79,3,84],[11,81,3,86],[12,4,4,2],[13,4,5,2],[13,8,5,6,"result"],[13,14,5,12],[13,17,5,15],[13,18,5,16,"ticks"],[13,23,5,21],[13,27,5,25],[13,29,5,27],[13,31,5,29,"slice"],[13,36,5,34],[13,37,5,35],[13,38,5,36],[14,4,6,2],[14,8,6,6],[15,6,7,4,"start"],[15,11,7,9],[15,13,7,11,"initialStart"],[15,25,7,23],[16,6,8,4,"end"],[17,4,9,2],[17,5,9,3],[17,8,9,6,"boundaries"],[17,18,9,16],[18,4,10,2],[18,8,10,6,"index"],[18,13,10,11],[18,16,10,14],[18,17,10,15],[19,4,11,2],[20,4,12,2],[21,4,13,2],[21,8,13,6,"stepsize"],[21,16,13,14],[21,19,13,17],[21,20,13,18],[22,4,14,2],[22,8,14,6,"start"],[22,13,14,11],[22,16,14,14,"initialStart"],[22,28,14,26],[23,4,15,2],[23,8,15,6,"_loop"],[23,13,15,11],[23,16,15,14],[23,25,15,23,"_loop"],[23,30,15,28,"_loop"],[23,31,15,28],[23,33,15,31],[24,8,16,6],[25,8,17,6],[27,8,19,6],[27,12,19,10,"entry"],[27,17,19,15],[27,20,19,18,"ticks"],[27,25,19,23],[27,30,19,28],[27,34,19,32],[27,38,19,36,"ticks"],[27,43,19,41],[27,48,19,46],[27,53,19,51],[27,54,19,52],[27,57,19,55],[27,62,19,60],[27,63,19,61],[27,66,19,64,"ticks"],[27,71,19,69],[27,72,19,70,"index"],[27,77,19,75],[27,78,19,76],[29,8,21,6],[30,8,22,6],[30,12,22,10,"entry"],[30,17,22,15],[30,22,22,20,"undefined"],[30,31,22,29],[30,33,22,31],[31,10,23,8],[31,17,23,15],[32,12,24,10,"v"],[32,13,24,11],[32,15,24,13],[32,19,24,13,"getEveryNth"],[32,35,24,24],[32,36,24,24,"getEveryNth"],[32,47,24,24],[32,49,24,25,"ticks"],[32,54,24,30],[32,56,24,32,"stepsize"],[32,64,24,40],[33,10,25,8],[33,11,25,9],[34,8,26,6],[36,8,28,6],[37,8,29,6],[37,12,29,10,"i"],[37,13,29,11],[37,16,29,14,"index"],[37,21,29,19],[38,8,30,6],[38,12,30,10,"size"],[38,16,30,14],[39,8,31,6],[39,12,31,10,"getSize"],[39,19,31,17],[39,22,31,20,"getSize"],[39,23,31,20],[39,28,31,26],[40,10,32,8],[40,14,32,12,"size"],[40,18,32,16],[40,23,32,21,"undefined"],[40,32,32,30],[40,34,32,32],[41,12,33,10,"size"],[41,16,33,14],[41,19,33,17,"getTickSize"],[41,30,33,28],[41,31,33,29,"entry"],[41,36,33,34],[41,38,33,36,"i"],[41,39,33,37],[41,40,33,38],[42,10,34,8],[43,10,35,8],[43,17,35,15,"size"],[43,21,35,19],[44,8,36,6],[44,9,36,7],[45,8,37,6],[45,12,37,10,"tickCoord"],[45,21,37,19],[45,24,37,22,"entry"],[45,29,37,27],[45,30,37,28,"coordinate"],[45,40,37,38],[46,8,38,6],[47,8,39,6],[47,12,39,10,"isShow"],[47,18,39,16],[47,21,39,19,"index"],[47,26,39,24],[47,31,39,29],[47,32,39,30],[47,36,39,34],[47,40,39,34,"isVisible"],[47,54,39,43],[47,55,39,43,"isVisible"],[47,64,39,43],[47,66,39,44,"sign"],[47,70,39,48],[47,72,39,50,"tickCoord"],[47,81,39,59],[47,83,39,61,"getSize"],[47,90,39,68],[47,92,39,70,"start"],[47,97,39,75],[47,99,39,77,"end"],[47,102,39,80],[47,103,39,81],[48,8,40,6],[48,12,40,10],[48,13,40,11,"isShow"],[48,19,40,17],[48,21,40,19],[49,10,41,8],[50,10,42,8,"index"],[50,15,42,13],[50,18,42,16],[50,19,42,17],[51,10,43,8,"start"],[51,15,43,13],[51,18,43,16,"initialStart"],[51,30,43,28],[52,10,44,8,"stepsize"],[52,18,44,16],[52,22,44,20],[52,23,44,21],[53,8,45,6],[54,8,46,6],[54,12,46,10,"isShow"],[54,18,46,16],[54,20,46,18],[55,10,47,8],[56,10,48,8,"start"],[56,15,48,13],[56,18,48,16,"tickCoord"],[56,27,48,25],[56,30,48,28,"sign"],[56,34,48,32],[56,38,48,36,"getSize"],[56,45,48,43],[56,46,48,44],[56,47,48,45],[56,50,48,48],[56,51,48,49],[56,54,48,52,"minTickGap"],[56,64,48,62],[56,65,48,63],[57,10,49,8,"index"],[57,15,49,13],[57,19,49,17,"stepsize"],[57,27,49,25],[58,8,50,6],[59,6,51,4],[59,7,51,5],[60,6,52,4,"_ret"],[60,10,52,8],[61,4,53,2],[61,11,53,9,"stepsize"],[61,19,53,17],[61,23,53,21,"result"],[61,29,53,27],[61,30,53,28,"length"],[61,36,53,34],[61,38,53,36],[62,6,54,4,"_ret"],[62,10,54,8],[62,13,54,11,"_loop"],[62,18,54,16],[62,19,54,17],[62,20,54,18],[63,6,55,4],[63,10,55,8,"_ret"],[63,14,55,12],[63,16,55,14],[63,23,55,21,"_ret"],[63,27,55,25],[63,28,55,26,"v"],[63,29,55,27],[64,4,56,2],[65,4,57,2],[65,11,57,9],[65,13,57,11],[66,2,58,0],[67,2,59,7],[67,11,59,16,"getEquidistantPreserveEndTicks"],[67,41,59,46,"getEquidistantPreserveEndTicks"],[67,42,59,47,"sign"],[67,46,59,51],[67,48,59,53,"boundaries"],[67,58,59,63],[67,60,59,65,"getTickSize"],[67,71,59,76],[67,73,59,78,"ticks"],[67,78,59,83],[67,80,59,85,"minTickGap"],[67,90,59,95],[67,92,59,97],[68,4,60,2],[69,4,61,2],[70,4,62,2],[70,8,62,6,"result"],[70,14,62,12],[70,17,62,15],[70,18,62,16,"ticks"],[70,23,62,21],[70,27,62,25],[70,29,62,27],[70,31,62,29,"slice"],[70,36,62,34],[70,37,62,35],[70,38,62,36],[71,4,63,2],[71,8,63,6,"len"],[71,11,63,9],[71,14,63,12,"result"],[71,20,63,18],[71,21,63,19,"length"],[71,27,63,25],[72,4,64,2],[72,8,64,6,"len"],[72,11,64,9],[72,16,64,14],[72,17,64,15],[72,19,64,17],[73,6,65,4],[73,13,65,11],[73,15,65,13],[74,4,66,2],[75,4,67,2],[75,8,67,6],[76,6,68,4,"start"],[76,11,68,9],[76,13,68,11,"initialStart"],[76,25,68,23],[77,6,69,4,"end"],[78,4,70,2],[78,5,70,3],[78,8,70,6,"boundaries"],[78,18,70,16],[80,4,72,2],[81,4,73,2],[81,9,73,7],[81,13,73,11,"stepsize"],[81,21,73,19],[81,24,73,22],[81,25,73,23],[81,27,73,25,"stepsize"],[81,35,73,33],[81,39,73,37,"len"],[81,42,73,40],[81,44,73,42,"stepsize"],[81,52,73,50],[81,54,73,52],[81,56,73,54],[82,6,74,4],[83,6,75,4],[83,10,75,8,"offset"],[83,16,75,14],[83,19,75,17],[83,20,75,18,"len"],[83,23,75,21],[83,26,75,24],[83,27,75,25],[83,31,75,29,"stepsize"],[83,39,75,37],[84,6,76,4],[84,10,76,8,"start"],[84,15,76,13],[84,18,76,16,"initialStart"],[84,30,76,28],[84,31,76,29],[84,32,76,30],[85,6,77,4],[85,10,77,8,"ok"],[85,12,77,10],[85,15,77,13],[85,19,77,17],[87,6,79,4],[88,6,80,4],[88,10,80,8,"_loop2"],[88,16,80,14],[88,19,80,17],[88,28,80,26,"_loop2"],[88,34,80,32,"_loop2"],[88,35,80,32],[88,37,80,35],[89,10,81,8],[89,14,81,12,"entry"],[89,19,81,17],[89,22,81,20,"ticks"],[89,27,81,25],[89,28,81,26,"index"],[89,33,81,31],[89,34,81,32],[90,10,82,8],[90,14,82,12,"entry"],[90,19,82,17],[90,23,82,21],[90,27,82,25],[90,29,82,27],[91,12,83,10],[91,19,83,17],[91,20,83,18],[91,21,83,19],[91,22,83,20],[92,10,84,8],[93,10,85,8],[93,14,85,12,"i"],[93,15,85,13],[93,18,85,16,"index"],[93,23,85,21],[94,10,86,8],[94,14,86,12,"size"],[94,18,86,16],[96,10,88,8],[97,10,89,8],[97,14,89,12,"getSize"],[97,21,89,19],[97,24,89,22,"getSize"],[97,25,89,22],[97,30,89,28],[98,12,90,10],[98,16,90,14,"size"],[98,20,90,18],[98,25,90,23,"undefined"],[98,34,90,32],[98,36,90,34],[99,14,91,12,"size"],[99,18,91,16],[99,21,91,19,"getTickSize"],[99,32,91,30],[99,33,91,31,"entry"],[99,38,91,36],[99,40,91,38,"i"],[99,41,91,39],[99,42,91,40],[100,12,92,10],[101,12,93,10],[101,19,93,17,"size"],[101,23,93,21],[102,10,94,8],[102,11,94,9],[103,10,95,8],[103,14,95,12,"tickCoord"],[103,23,95,21],[103,26,95,24,"entry"],[103,31,95,29],[103,32,95,30,"coordinate"],[103,42,95,40],[105,10,97,8],[106,10,98,8],[107,10,99,8],[107,14,99,12,"isShow"],[107,20,99,18],[107,23,99,21,"index"],[107,28,99,26],[107,33,99,31,"offset"],[107,39,99,37],[107,43,99,41],[107,47,99,41,"isVisible"],[107,61,99,50],[107,62,99,50,"isVisible"],[107,71,99,50],[107,73,99,51,"sign"],[107,77,99,55],[107,79,99,57,"tickCoord"],[107,88,99,66],[107,90,99,68,"getSize"],[107,97,99,75],[107,99,99,77,"start"],[107,104,99,82],[107,106,99,84,"end"],[107,109,99,87],[107,110,99,88],[108,10,100,8],[108,14,100,12],[108,15,100,13,"isShow"],[108,21,100,19],[108,23,100,21],[109,12,101,10],[110,12,102,10],[111,12,103,10,"ok"],[111,14,103,12],[111,17,103,15],[111,22,103,20],[112,12,104,10],[112,19,104,17],[112,20,104,18],[112,21,104,19],[112,22,104,20],[113,10,105,8],[115,10,107,8],[116,10,108,8],[116,14,108,12,"isShow"],[116,20,108,18],[116,22,108,20],[117,12,109,10,"start"],[117,17,109,15],[117,20,109,18,"tickCoord"],[117,29,109,27],[117,32,109,30,"sign"],[117,36,109,34],[117,40,109,38,"getSize"],[117,47,109,45],[117,48,109,46],[117,49,109,47],[117,52,109,50],[117,53,109,51],[117,56,109,54,"minTickGap"],[117,66,109,64],[117,67,109,65],[118,10,110,8],[119,8,111,6],[119,9,111,7],[120,8,112,6,"_ret2"],[120,13,112,11],[121,6,113,4],[121,11,113,9],[121,15,113,13,"index"],[121,20,113,18],[121,23,113,21,"offset"],[121,29,113,27],[121,31,113,29,"index"],[121,36,113,34],[121,39,113,37,"len"],[121,42,113,40],[121,44,113,42,"index"],[121,49,113,47],[121,53,113,51,"stepsize"],[121,61,113,59],[121,63,113,61],[122,8,114,6,"_ret2"],[122,13,114,11],[122,16,114,14,"_loop2"],[122,22,114,20],[122,23,114,21],[122,24,114,22],[123,8,115,6],[123,12,115,10,"_ret2"],[123,17,115,15],[123,22,115,20],[123,23,115,21],[123,25,115,23],[124,8,116,6],[124,12,116,10,"_ret2"],[124,17,116,15],[124,22,116,20],[124,23,116,21],[124,25,116,23],[125,6,117,4],[127,6,119,4],[128,6,120,4],[128,10,120,8,"ok"],[128,12,120,10],[128,14,120,12],[129,8,121,6],[130,8,122,6],[130,12,122,10,"finalTicks"],[130,22,122,20],[130,25,122,23],[130,27,122,25],[131,8,123,6],[131,13,123,11],[131,17,123,15,"_index"],[131,23,123,21],[131,26,123,24,"offset"],[131,32,123,30],[131,34,123,32,"_index"],[131,40,123,38],[131,43,123,41,"len"],[131,46,123,44],[131,48,123,46,"_index"],[131,54,123,52],[131,58,123,56,"stepsize"],[131,66,123,64],[131,68,123,66],[132,10,124,8],[132,14,124,12,"tick"],[132,18,124,16],[132,21,124,19,"ticks"],[132,26,124,24],[132,27,124,25,"_index"],[132,33,124,31],[132,34,124,32],[133,10,125,8],[133,14,125,12,"tick"],[133,18,125,16],[133,22,125,20],[133,26,125,24],[133,28,125,26],[134,12,126,10,"finalTicks"],[134,22,126,20],[134,23,126,21,"push"],[134,27,126,25],[134,28,126,26,"tick"],[134,32,126,30],[134,33,126,31],[135,10,127,8],[136,8,128,6],[137,8,129,6],[137,15,129,13,"finalTicks"],[137,25,129,23],[138,6,130,4],[139,4,131,2],[141,4,133,2],[142,4,134,2],[142,11,134,9],[142,13,134,11],[143,2,135,0],[144,0,135,1],[144,3]],"functionMap":{"names":["<global>","getEquidistantTicks","_loop","getSize","getEquidistantPreserveEndTicks","_loop2"],"mappings":"AAA;OCE;cCY;oBCgB;ODK;KDe;CDO;OIC;iBCqB;sBFS;SEK;ODiB"},"hasCjsExports":false},"type":"js/module"}]}