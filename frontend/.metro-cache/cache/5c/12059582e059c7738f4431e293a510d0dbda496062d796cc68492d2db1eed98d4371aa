{"dependencies":[{"name":"../../../util/stacks/getStackSeriesIdentifier","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":32,"index":179},"end":{"line":7,"column":88,"index":235}}],"key":"FKJGwAHh/SJkcCe+/FCSx9vwEnE=","exportNames":["*"],"imports":1}},{"name":"../../../util/ChartUtils","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":18,"index":255},"end":{"line":8,"column":53,"index":290}}],"key":"oaV3iW9ELHw25uvlge/j+D08C3U=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.combineDisplayedStackedData = combineDisplayedStackedData;\n  var _getStackSeriesIdentifier = require(_dependencyMap[0], \"../../../util/stacks/getStackSeriesIdentifier\");\n  var _ChartUtils = require(_dependencyMap[1], \"../../../util/ChartUtils\");\n  /**\n   * In a stacked chart, each graphical item has its own data. That data could be either:\n   * - defined on the chart root, in which case the item gets a unique dataKey\n   * - or defined on the item itself, in which case multiple items can share the same dataKey\n   *\n   * That means we cannot use the dataKey as a unique identifier for the item.\n   *\n   * This type represents a single data point in a stacked chart, where each key is a series identifier\n   * and the value is the numeric value for that series using the numerical axis dataKey.\n   */\n\n  function combineDisplayedStackedData(stackedGraphicalItems, _ref, tooltipAxisSettings) {\n    var {\n      chartData = []\n    } = _ref;\n    var {\n      allowDuplicatedCategory,\n      dataKey: tooltipDataKey\n    } = tooltipAxisSettings;\n\n    // A map of tooltip data keys to the stacked data points\n    var knownItemsByDataKey = new Map();\n    stackedGraphicalItems.forEach(item => {\n      var _item$data;\n      // If there is no data on the individual item then we use the root chart data\n      var resolvedData = (_item$data = item.data) !== null && _item$data !== void 0 ? _item$data : chartData;\n      if (resolvedData == null || resolvedData.length === 0) {\n        // if that doesn't work then we skip this item\n        return;\n      }\n      var stackIdentifier = (0, _getStackSeriesIdentifier.getStackSeriesIdentifier)(item);\n      resolvedData.forEach((entry, index) => {\n        var tooltipValue = tooltipDataKey == null || allowDuplicatedCategory ? index : String((0, _ChartUtils.getValueByDataKey)(entry, tooltipDataKey, null));\n        var numericValue = (0, _ChartUtils.getValueByDataKey)(entry, item.dataKey, 0);\n        var curr;\n        if (knownItemsByDataKey.has(tooltipValue)) {\n          curr = knownItemsByDataKey.get(tooltipValue);\n        } else {\n          curr = {};\n        }\n        Object.assign(curr, {\n          [stackIdentifier]: numericValue\n        });\n        knownItemsByDataKey.set(tooltipValue, curr);\n      });\n    });\n    return Array.from(knownItemsByDataKey.values());\n  }\n});","lineCount":58,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0,"Object"],[4,8,3,6],[4,9,3,7,"defineProperty"],[4,23,3,21],[4,24,3,22,"exports"],[4,31,3,29],[4,33,3,31],[4,45,3,43],[4,47,3,45],[5,4,4,2,"value"],[5,9,4,7],[5,11,4,9],[6,2,5,0],[6,3,5,1],[6,4,5,2],[7,2,6,0,"exports"],[7,9,6,7],[7,10,6,8,"combineDisplayedStackedData"],[7,37,6,35],[7,40,6,38,"combineDisplayedStackedData"],[7,67,6,65],[8,2,7,0],[8,6,7,4,"_getStackSeriesIdentifier"],[8,31,7,29],[8,34,7,32,"require"],[8,41,7,39],[8,42,7,39,"_dependencyMap"],[8,56,7,39],[8,108,7,87],[8,109,7,88],[9,2,8,0],[9,6,8,4,"_ChartUtils"],[9,17,8,15],[9,20,8,18,"require"],[9,27,8,25],[9,28,8,25,"_dependencyMap"],[9,42,8,25],[9,73,8,52],[9,74,8,53],[10,2,9,0],[11,0,10,0],[12,0,11,0],[13,0,12,0],[14,0,13,0],[15,0,14,0],[16,0,15,0],[17,0,16,0],[18,0,17,0],[19,0,18,0],[21,2,20,0],[21,11,20,9,"combineDisplayedStackedData"],[21,38,20,36,"combineDisplayedStackedData"],[21,39,20,37,"stackedGraphicalItems"],[21,60,20,58],[21,62,20,60,"_ref"],[21,66,20,64],[21,68,20,66,"tooltipAxisSettings"],[21,87,20,85],[21,89,20,87],[22,4,21,2],[22,8,21,6],[23,6,22,4,"chartData"],[23,15,22,13],[23,18,22,16],[24,4,23,2],[24,5,23,3],[24,8,23,6,"_ref"],[24,12,23,10],[25,4,24,2],[25,8,24,6],[26,6,25,4,"allowDuplicatedCategory"],[26,29,25,27],[27,6,26,4,"dataKey"],[27,13,26,11],[27,15,26,13,"tooltipDataKey"],[28,4,27,2],[28,5,27,3],[28,8,27,6,"tooltipAxisSettings"],[28,27,27,25],[30,4,29,2],[31,4,30,2],[31,8,30,6,"knownItemsByDataKey"],[31,27,30,25],[31,30,30,28],[31,34,30,32,"Map"],[31,37,30,35],[31,38,30,36],[31,39,30,37],[32,4,31,2,"stackedGraphicalItems"],[32,25,31,23],[32,26,31,24,"forEach"],[32,33,31,31],[32,34,31,32,"item"],[32,38,31,36],[32,42,31,40],[33,6,32,4],[33,10,32,8,"_item$data"],[33,20,32,18],[34,6,33,4],[35,6,34,4],[35,10,34,8,"resolvedData"],[35,22,34,20],[35,25,34,23],[35,26,34,24,"_item$data"],[35,36,34,34],[35,39,34,37,"item"],[35,43,34,41],[35,44,34,42,"data"],[35,48,34,46],[35,54,34,52],[35,58,34,56],[35,62,34,60,"_item$data"],[35,72,34,70],[35,77,34,75],[35,82,34,80],[35,83,34,81],[35,86,34,84,"_item$data"],[35,96,34,94],[35,99,34,97,"chartData"],[35,108,34,106],[36,6,35,4],[36,10,35,8,"resolvedData"],[36,22,35,20],[36,26,35,24],[36,30,35,28],[36,34,35,32,"resolvedData"],[36,46,35,44],[36,47,35,45,"length"],[36,53,35,51],[36,58,35,56],[36,59,35,57],[36,61,35,59],[37,8,36,6],[38,8,37,6],[39,6,38,4],[40,6,39,4],[40,10,39,8,"stackIdentifier"],[40,25,39,23],[40,28,39,26],[40,29,39,27],[40,30,39,28],[40,32,39,30,"_getStackSeriesIdentifier"],[40,57,39,55],[40,58,39,56,"getStackSeriesIdentifier"],[40,82,39,80],[40,84,39,82,"item"],[40,88,39,86],[40,89,39,87],[41,6,40,4,"resolvedData"],[41,18,40,16],[41,19,40,17,"forEach"],[41,26,40,24],[41,27,40,25],[41,28,40,26,"entry"],[41,33,40,31],[41,35,40,33,"index"],[41,40,40,38],[41,45,40,43],[42,8,41,6],[42,12,41,10,"tooltipValue"],[42,24,41,22],[42,27,41,25,"tooltipDataKey"],[42,41,41,39],[42,45,41,43],[42,49,41,47],[42,53,41,51,"allowDuplicatedCategory"],[42,76,41,74],[42,79,41,77,"index"],[42,84,41,82],[42,87,41,85,"String"],[42,93,41,91],[42,94,41,92],[42,95,41,93],[42,96,41,94],[42,98,41,96,"_ChartUtils"],[42,109,41,107],[42,110,41,108,"getValueByDataKey"],[42,127,41,125],[42,129,41,127,"entry"],[42,134,41,132],[42,136,41,134,"tooltipDataKey"],[42,150,41,148],[42,152,41,150],[42,156,41,154],[42,157,41,155],[42,158,41,156],[43,8,42,6],[43,12,42,10,"numericValue"],[43,24,42,22],[43,27,42,25],[43,28,42,26],[43,29,42,27],[43,31,42,29,"_ChartUtils"],[43,42,42,40],[43,43,42,41,"getValueByDataKey"],[43,60,42,58],[43,62,42,60,"entry"],[43,67,42,65],[43,69,42,67,"item"],[43,73,42,71],[43,74,42,72,"dataKey"],[43,81,42,79],[43,83,42,81],[43,84,42,82],[43,85,42,83],[44,8,43,6],[44,12,43,10,"curr"],[44,16,43,14],[45,8,44,6],[45,12,44,10,"knownItemsByDataKey"],[45,31,44,29],[45,32,44,30,"has"],[45,35,44,33],[45,36,44,34,"tooltipValue"],[45,48,44,46],[45,49,44,47],[45,51,44,49],[46,10,45,8,"curr"],[46,14,45,12],[46,17,45,15,"knownItemsByDataKey"],[46,36,45,34],[46,37,45,35,"get"],[46,40,45,38],[46,41,45,39,"tooltipValue"],[46,53,45,51],[46,54,45,52],[47,8,46,6],[47,9,46,7],[47,15,46,13],[48,10,47,8,"curr"],[48,14,47,12],[48,17,47,15],[48,18,47,16],[48,19,47,17],[49,8,48,6],[50,8,49,6,"Object"],[50,14,49,12],[50,15,49,13,"assign"],[50,21,49,19],[50,22,49,20,"curr"],[50,26,49,24],[50,28,49,26],[51,10,50,8],[51,11,50,9,"stackIdentifier"],[51,26,50,24],[51,29,50,27,"numericValue"],[52,8,51,6],[52,9,51,7],[52,10,51,8],[53,8,52,6,"knownItemsByDataKey"],[53,27,52,25],[53,28,52,26,"set"],[53,31,52,29],[53,32,52,30,"tooltipValue"],[53,44,52,42],[53,46,52,44,"curr"],[53,50,52,48],[53,51,52,49],[54,6,53,4],[54,7,53,5],[54,8,53,6],[55,4,54,2],[55,5,54,3],[55,6,54,4],[56,4,55,2],[56,11,55,9,"Array"],[56,16,55,14],[56,17,55,15,"from"],[56,21,55,19],[56,22,55,20,"knownItemsByDataKey"],[56,41,55,39],[56,42,55,40,"values"],[56,48,55,46],[56,49,55,47],[56,50,55,48],[56,51,55,49],[57,2,56,0],[58,0,56,1],[58,3]],"functionMap":{"names":["<global>","combineDisplayedStackedData","stackedGraphicalItems.forEach$argument_0","resolvedData.forEach$argument_0"],"mappings":"AAA;ACmB;gCCW;yBCS;KDa;GDC"},"hasCjsExports":true},"type":"js/module"}]}