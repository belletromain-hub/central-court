{"dependencies":[{"name":"../util/TickUtils","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":17,"index":221},"end":{"line":8,"column":45,"index":249}}],"key":"JqqYjZ+9iyvh5fjxhs4u+5shgEg=","exportNames":["*"],"imports":1}},{"name":"../util/getEveryNth","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":9,"column":19,"index":270},"end":{"line":9,"column":49,"index":300}}],"key":"Gj9atkrH0Me7QmLMxpilk/EkxRE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.getEquidistantPreserveEndTicks = getEquidistantPreserveEndTicks;\n  exports.getEquidistantTicks = getEquidistantTicks;\n  var _TickUtils = require(_dependencyMap[0], \"../util/TickUtils\");\n  var _getEveryNth = require(_dependencyMap[1], \"../util/getEveryNth\");\n  function getEquidistantTicks(sign, boundaries, getTickSize, ticks, minTickGap) {\n    // If the ticks are readonly, then the slice might not be necessary\n    var result = (ticks || []).slice();\n    var initialStart = boundaries.start,\n      end = boundaries.end;\n    var index = 0;\n    // Premature optimisation idea 1: Estimate a lower bound, and start from there.\n    // For now, start from every tick\n    var stepsize = 1;\n    var start = initialStart;\n    var _loop = function _loop() {\n        // Given stepsize, evaluate whether every stepsize-th tick can be shown.\n        // If it can not, then increase the stepsize by 1, and try again.\n\n        var entry = ticks === null || ticks === void 0 ? void 0 : ticks[index];\n\n        // Break condition - If we have evaluated all the ticks, then we are done.\n        if (entry === undefined) {\n          return {\n            v: (0, _getEveryNth.getEveryNth)(ticks, stepsize)\n          };\n        }\n\n        // Check if the element collides with the next element\n        var i = index;\n        var size;\n        var getSize = function getSize() {\n          if (size === undefined) {\n            size = getTickSize(entry, i);\n          }\n          return size;\n        };\n        var tickCoord = entry.coordinate;\n        // We will always show the first tick.\n        var isShow = index === 0 || (0, _TickUtils.isVisible)(sign, tickCoord, getSize, start, end);\n        if (!isShow) {\n          // Start all over with a larger stepsize\n          index = 0;\n          start = initialStart;\n          stepsize += 1;\n        }\n        if (isShow) {\n          // If it can be shown, update the start\n          start = tickCoord + sign * (getSize() / 2 + minTickGap);\n          index += stepsize;\n        }\n      },\n      _ret;\n    while (stepsize <= result.length) {\n      _ret = _loop();\n      if (_ret) return _ret.v;\n    }\n    return [];\n  }\n  function getEquidistantPreserveEndTicks(sign, boundaries, getTickSize, ticks, minTickGap) {\n    // If the ticks are readonly, then the slice might not be necessary\n    // Reworked logic for getEquidistantPreserveEndTicks\n    var result = (ticks || []).slice();\n    var len = result.length;\n    if (len === 0) {\n      return [];\n    }\n    var initialStart = boundaries.start,\n      end = boundaries.end;\n\n    // Start with stepsize = 1 (every tick) up to the maximum possible stepsize (len)\n    for (var stepsize = 1; stepsize <= len; stepsize++) {\n      // 1. Calculate the offset so the last tick (index len - 1) is always included in the sequence.\n      var offset = (len - 1) % stepsize;\n      var start = initialStart; // `start` tracks the coordinate of the last successfully drawn tick + gap\n      var ok = true;\n\n      // 2. Iterate through the end-anchored sequence: offset, offset + stepsize, ..., len - 1\n      var _loop2 = function _loop2() {\n          var entry = ticks[index];\n          if (entry == null) {\n            return 0; // continue\n          }\n          var i = index;\n          var size;\n\n          // Use a function to get size, as in the original code\n          var getSize = function getSize() {\n            if (size === undefined) {\n              size = getTickSize(entry, i);\n            }\n            return size;\n          };\n          var tickCoord = entry.coordinate;\n\n          // 3. Apply visibility logic (including the first tick special case)\n          // The reviewer says *not* to unconditionally bypass checks for the last tick.\n          var isShow = index === offset || (0, _TickUtils.isVisible)(sign, tickCoord, getSize, start, end);\n          if (!isShow) {\n            // If any tick in this end-anchored sequence fails visibility/collision,\n            // reject this stepsize and move to the next iteration (larger stepsize).\n            ok = false;\n            return 1; // break\n          }\n\n          // 4. If showable, update the 'start' coordinate for the next collision check\n          if (isShow) {\n            start = tickCoord + sign * (getSize() / 2 + minTickGap);\n          }\n        },\n        _ret2;\n      for (var index = offset; index < len; index += stepsize) {\n        _ret2 = _loop2();\n        if (_ret2 === 0) continue;\n        if (_ret2 === 1) break;\n      }\n\n      // 5. If the entire sequence for this stepsize passed the visibility check, return the result\n      if (ok) {\n        // Build the final result array explicitly using the validated stepsize and offset.\n        var finalTicks = [];\n        for (var _index = offset; _index < len; _index += stepsize) {\n          var tick = ticks[_index];\n          if (tick != null) {\n            finalTicks.push(tick);\n          }\n        }\n        return finalTicks;\n      }\n    }\n\n    // If no stepsize works (this shouldn't happen unless minTickGap is huge), return an empty array.\n    return [];\n  }\n});","lineCount":140,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0,"Object"],[4,8,3,6],[4,9,3,7,"defineProperty"],[4,23,3,21],[4,24,3,22,"exports"],[4,31,3,29],[4,33,3,31],[4,45,3,43],[4,47,3,45],[5,4,4,2,"value"],[5,9,4,7],[5,11,4,9],[6,2,5,0],[6,3,5,1],[6,4,5,2],[7,2,6,0,"exports"],[7,9,6,7],[7,10,6,8,"getEquidistantPreserveEndTicks"],[7,40,6,38],[7,43,6,41,"getEquidistantPreserveEndTicks"],[7,73,6,71],[8,2,7,0,"exports"],[8,9,7,7],[8,10,7,8,"getEquidistantTicks"],[8,29,7,27],[8,32,7,30,"getEquidistantTicks"],[8,51,7,49],[9,2,8,0],[9,6,8,4,"_TickUtils"],[9,16,8,14],[9,19,8,17,"require"],[9,26,8,24],[9,27,8,24,"_dependencyMap"],[9,41,8,24],[9,65,8,44],[9,66,8,45],[10,2,9,0],[10,6,9,4,"_getEveryNth"],[10,18,9,16],[10,21,9,19,"require"],[10,28,9,26],[10,29,9,26,"_dependencyMap"],[10,43,9,26],[10,69,9,48],[10,70,9,49],[11,2,10,0],[11,11,10,9,"getEquidistantTicks"],[11,30,10,28,"getEquidistantTicks"],[11,31,10,29,"sign"],[11,35,10,33],[11,37,10,35,"boundaries"],[11,47,10,45],[11,49,10,47,"getTickSize"],[11,60,10,58],[11,62,10,60,"ticks"],[11,67,10,65],[11,69,10,67,"minTickGap"],[11,79,10,77],[11,81,10,79],[12,4,11,2],[13,4,12,2],[13,8,12,6,"result"],[13,14,12,12],[13,17,12,15],[13,18,12,16,"ticks"],[13,23,12,21],[13,27,12,25],[13,29,12,27],[13,31,12,29,"slice"],[13,36,12,34],[13,37,12,35],[13,38,12,36],[14,4,13,2],[14,8,14,11,"initialStart"],[14,20,14,23],[14,23,16,6,"boundaries"],[14,33,16,16],[14,34,14,4,"start"],[14,39,14,9],[15,6,15,4,"end"],[15,9,15,7],[15,12,16,6,"boundaries"],[15,22,16,16],[15,23,15,4,"end"],[15,26,15,7],[16,4,17,2],[16,8,17,6,"index"],[16,13,17,11],[16,16,17,14],[16,17,17,15],[17,4,18,2],[18,4,19,2],[19,4,20,2],[19,8,20,6,"stepsize"],[19,16,20,14],[19,19,20,17],[19,20,20,18],[20,4,21,2],[20,8,21,6,"start"],[20,13,21,11],[20,16,21,14,"initialStart"],[20,28,21,26],[21,4,22,2],[21,8,22,6,"_loop"],[21,13,22,11],[21,16,22,14],[21,25,22,23,"_loop"],[21,30,22,28,"_loop"],[21,31,22,28],[21,33,22,31],[22,8,23,6],[23,8,24,6],[25,8,26,6],[25,12,26,10,"entry"],[25,17,26,15],[25,20,26,18,"ticks"],[25,25,26,23],[25,30,26,28],[25,34,26,32],[25,38,26,36,"ticks"],[25,43,26,41],[25,48,26,46],[25,53,26,51],[25,54,26,52],[25,57,26,55],[25,62,26,60],[25,63,26,61],[25,66,26,64,"ticks"],[25,71,26,69],[25,72,26,70,"index"],[25,77,26,75],[25,78,26,76],[27,8,28,6],[28,8,29,6],[28,12,29,10,"entry"],[28,17,29,15],[28,22,29,20,"undefined"],[28,31,29,29],[28,33,29,31],[29,10,30,8],[29,17,30,15],[30,12,31,10,"v"],[30,13,31,11],[30,15,31,13],[30,16,31,14],[30,17,31,15],[30,19,31,17,"_getEveryNth"],[30,31,31,29],[30,32,31,30,"getEveryNth"],[30,43,31,41],[30,45,31,43,"ticks"],[30,50,31,48],[30,52,31,50,"stepsize"],[30,60,31,58],[31,10,32,8],[31,11,32,9],[32,8,33,6],[34,8,35,6],[35,8,36,6],[35,12,36,10,"i"],[35,13,36,11],[35,16,36,14,"index"],[35,21,36,19],[36,8,37,6],[36,12,37,10,"size"],[36,16,37,14],[37,8,38,6],[37,12,38,10,"getSize"],[37,19,38,17],[37,22,38,20],[37,31,38,10,"getSize"],[37,38,38,17,"getSize"],[37,39,38,17],[37,41,38,26],[38,10,39,8],[38,14,39,12,"size"],[38,18,39,16],[38,23,39,21,"undefined"],[38,32,39,30],[38,34,39,32],[39,12,40,10,"size"],[39,16,40,14],[39,19,40,17,"getTickSize"],[39,30,40,28],[39,31,40,29,"entry"],[39,36,40,34],[39,38,40,36,"i"],[39,39,40,37],[39,40,40,38],[40,10,41,8],[41,10,42,8],[41,17,42,15,"size"],[41,21,42,19],[42,8,43,6],[42,9,43,7],[43,8,44,6],[43,12,44,10,"tickCoord"],[43,21,44,19],[43,24,44,22,"entry"],[43,29,44,27],[43,30,44,28,"coordinate"],[43,40,44,38],[44,8,45,6],[45,8,46,6],[45,12,46,10,"isShow"],[45,18,46,16],[45,21,46,19,"index"],[45,26,46,24],[45,31,46,29],[45,32,46,30],[45,36,46,34],[45,37,46,35],[45,38,46,36],[45,40,46,38,"_TickUtils"],[45,50,46,48],[45,51,46,49,"isVisible"],[45,60,46,58],[45,62,46,60,"sign"],[45,66,46,64],[45,68,46,66,"tickCoord"],[45,77,46,75],[45,79,46,77,"getSize"],[45,86,46,84],[45,88,46,86,"start"],[45,93,46,91],[45,95,46,93,"end"],[45,98,46,96],[45,99,46,97],[46,8,47,6],[46,12,47,10],[46,13,47,11,"isShow"],[46,19,47,17],[46,21,47,19],[47,10,48,8],[48,10,49,8,"index"],[48,15,49,13],[48,18,49,16],[48,19,49,17],[49,10,50,8,"start"],[49,15,50,13],[49,18,50,16,"initialStart"],[49,30,50,28],[50,10,51,8,"stepsize"],[50,18,51,16],[50,22,51,20],[50,23,51,21],[51,8,52,6],[52,8,53,6],[52,12,53,10,"isShow"],[52,18,53,16],[52,20,53,18],[53,10,54,8],[54,10,55,8,"start"],[54,15,55,13],[54,18,55,16,"tickCoord"],[54,27,55,25],[54,30,55,28,"sign"],[54,34,55,32],[54,38,55,36,"getSize"],[54,45,55,43],[54,46,55,44],[54,47,55,45],[54,50,55,48],[54,51,55,49],[54,54,55,52,"minTickGap"],[54,64,55,62],[54,65,55,63],[55,10,56,8,"index"],[55,15,56,13],[55,19,56,17,"stepsize"],[55,27,56,25],[56,8,57,6],[57,6,58,4],[57,7,58,5],[58,6,59,4,"_ret"],[58,10,59,8],[59,4,60,2],[59,11,60,9,"stepsize"],[59,19,60,17],[59,23,60,21,"result"],[59,29,60,27],[59,30,60,28,"length"],[59,36,60,34],[59,38,60,36],[60,6,61,4,"_ret"],[60,10,61,8],[60,13,61,11,"_loop"],[60,18,61,16],[60,19,61,17],[60,20,61,18],[61,6,62,4],[61,10,62,8,"_ret"],[61,14,62,12],[61,16,62,14],[61,23,62,21,"_ret"],[61,27,62,25],[61,28,62,26,"v"],[61,29,62,27],[62,4,63,2],[63,4,64,2],[63,11,64,9],[63,13,64,11],[64,2,65,0],[65,2,66,0],[65,11,66,9,"getEquidistantPreserveEndTicks"],[65,41,66,39,"getEquidistantPreserveEndTicks"],[65,42,66,40,"sign"],[65,46,66,44],[65,48,66,46,"boundaries"],[65,58,66,56],[65,60,66,58,"getTickSize"],[65,71,66,69],[65,73,66,71,"ticks"],[65,78,66,76],[65,80,66,78,"minTickGap"],[65,90,66,88],[65,92,66,90],[66,4,67,2],[67,4,68,2],[68,4,69,2],[68,8,69,6,"result"],[68,14,69,12],[68,17,69,15],[68,18,69,16,"ticks"],[68,23,69,21],[68,27,69,25],[68,29,69,27],[68,31,69,29,"slice"],[68,36,69,34],[68,37,69,35],[68,38,69,36],[69,4,70,2],[69,8,70,6,"len"],[69,11,70,9],[69,14,70,12,"result"],[69,20,70,18],[69,21,70,19,"length"],[69,27,70,25],[70,4,71,2],[70,8,71,6,"len"],[70,11,71,9],[70,16,71,14],[70,17,71,15],[70,19,71,17],[71,6,72,4],[71,13,72,11],[71,15,72,13],[72,4,73,2],[73,4,74,2],[73,8,75,11,"initialStart"],[73,20,75,23],[73,23,77,6,"boundaries"],[73,33,77,16],[73,34,75,4,"start"],[73,39,75,9],[74,6,76,4,"end"],[74,9,76,7],[74,12,77,6,"boundaries"],[74,22,77,16],[74,23,76,4,"end"],[74,26,76,7],[76,4,79,2],[77,4,80,2],[77,9,80,7],[77,13,80,11,"stepsize"],[77,21,80,19],[77,24,80,22],[77,25,80,23],[77,27,80,25,"stepsize"],[77,35,80,33],[77,39,80,37,"len"],[77,42,80,40],[77,44,80,42,"stepsize"],[77,52,80,50],[77,54,80,52],[77,56,80,54],[78,6,81,4],[79,6,82,4],[79,10,82,8,"offset"],[79,16,82,14],[79,19,82,17],[79,20,82,18,"len"],[79,23,82,21],[79,26,82,24],[79,27,82,25],[79,31,82,29,"stepsize"],[79,39,82,37],[80,6,83,4],[80,10,83,8,"start"],[80,15,83,13],[80,18,83,16,"initialStart"],[80,30,83,28],[80,31,83,29],[80,32,83,30],[81,6,84,4],[81,10,84,8,"ok"],[81,12,84,10],[81,15,84,13],[81,19,84,17],[83,6,86,4],[84,6,87,4],[84,10,87,8,"_loop2"],[84,16,87,14],[84,19,87,17],[84,28,87,26,"_loop2"],[84,34,87,32,"_loop2"],[84,35,87,32],[84,37,87,35],[85,10,88,8],[85,14,88,12,"entry"],[85,19,88,17],[85,22,88,20,"ticks"],[85,27,88,25],[85,28,88,26,"index"],[85,33,88,31],[85,34,88,32],[86,10,89,8],[86,14,89,12,"entry"],[86,19,89,17],[86,23,89,21],[86,27,89,25],[86,29,89,27],[87,12,90,10],[87,19,90,17],[87,20,90,18],[87,21,90,19],[87,22,90,20],[88,10,91,8],[89,10,92,8],[89,14,92,12,"i"],[89,15,92,13],[89,18,92,16,"index"],[89,23,92,21],[90,10,93,8],[90,14,93,12,"size"],[90,18,93,16],[92,10,95,8],[93,10,96,8],[93,14,96,12,"getSize"],[93,21,96,19],[93,24,96,22],[93,33,96,12,"getSize"],[93,40,96,19,"getSize"],[93,41,96,19],[93,43,96,28],[94,12,97,10],[94,16,97,14,"size"],[94,20,97,18],[94,25,97,23,"undefined"],[94,34,97,32],[94,36,97,34],[95,14,98,12,"size"],[95,18,98,16],[95,21,98,19,"getTickSize"],[95,32,98,30],[95,33,98,31,"entry"],[95,38,98,36],[95,40,98,38,"i"],[95,41,98,39],[95,42,98,40],[96,12,99,10],[97,12,100,10],[97,19,100,17,"size"],[97,23,100,21],[98,10,101,8],[98,11,101,9],[99,10,102,8],[99,14,102,12,"tickCoord"],[99,23,102,21],[99,26,102,24,"entry"],[99,31,102,29],[99,32,102,30,"coordinate"],[99,42,102,40],[101,10,104,8],[102,10,105,8],[103,10,106,8],[103,14,106,12,"isShow"],[103,20,106,18],[103,23,106,21,"index"],[103,28,106,26],[103,33,106,31,"offset"],[103,39,106,37],[103,43,106,41],[103,44,106,42],[103,45,106,43],[103,47,106,45,"_TickUtils"],[103,57,106,55],[103,58,106,56,"isVisible"],[103,67,106,65],[103,69,106,67,"sign"],[103,73,106,71],[103,75,106,73,"tickCoord"],[103,84,106,82],[103,86,106,84,"getSize"],[103,93,106,91],[103,95,106,93,"start"],[103,100,106,98],[103,102,106,100,"end"],[103,105,106,103],[103,106,106,104],[104,10,107,8],[104,14,107,12],[104,15,107,13,"isShow"],[104,21,107,19],[104,23,107,21],[105,12,108,10],[106,12,109,10],[107,12,110,10,"ok"],[107,14,110,12],[107,17,110,15],[107,22,110,20],[108,12,111,10],[108,19,111,17],[108,20,111,18],[108,21,111,19],[108,22,111,20],[109,10,112,8],[111,10,114,8],[112,10,115,8],[112,14,115,12,"isShow"],[112,20,115,18],[112,22,115,20],[113,12,116,10,"start"],[113,17,116,15],[113,20,116,18,"tickCoord"],[113,29,116,27],[113,32,116,30,"sign"],[113,36,116,34],[113,40,116,38,"getSize"],[113,47,116,45],[113,48,116,46],[113,49,116,47],[113,52,116,50],[113,53,116,51],[113,56,116,54,"minTickGap"],[113,66,116,64],[113,67,116,65],[114,10,117,8],[115,8,118,6],[115,9,118,7],[116,8,119,6,"_ret2"],[116,13,119,11],[117,6,120,4],[117,11,120,9],[117,15,120,13,"index"],[117,20,120,18],[117,23,120,21,"offset"],[117,29,120,27],[117,31,120,29,"index"],[117,36,120,34],[117,39,120,37,"len"],[117,42,120,40],[117,44,120,42,"index"],[117,49,120,47],[117,53,120,51,"stepsize"],[117,61,120,59],[117,63,120,61],[118,8,121,6,"_ret2"],[118,13,121,11],[118,16,121,14,"_loop2"],[118,22,121,20],[118,23,121,21],[118,24,121,22],[119,8,122,6],[119,12,122,10,"_ret2"],[119,17,122,15],[119,22,122,20],[119,23,122,21],[119,25,122,23],[120,8,123,6],[120,12,123,10,"_ret2"],[120,17,123,15],[120,22,123,20],[120,23,123,21],[120,25,123,23],[121,6,124,4],[123,6,126,4],[124,6,127,4],[124,10,127,8,"ok"],[124,12,127,10],[124,14,127,12],[125,8,128,6],[126,8,129,6],[126,12,129,10,"finalTicks"],[126,22,129,20],[126,25,129,23],[126,27,129,25],[127,8,130,6],[127,13,130,11],[127,17,130,15,"_index"],[127,23,130,21],[127,26,130,24,"offset"],[127,32,130,30],[127,34,130,32,"_index"],[127,40,130,38],[127,43,130,41,"len"],[127,46,130,44],[127,48,130,46,"_index"],[127,54,130,52],[127,58,130,56,"stepsize"],[127,66,130,64],[127,68,130,66],[128,10,131,8],[128,14,131,12,"tick"],[128,18,131,16],[128,21,131,19,"ticks"],[128,26,131,24],[128,27,131,25,"_index"],[128,33,131,31],[128,34,131,32],[129,10,132,8],[129,14,132,12,"tick"],[129,18,132,16],[129,22,132,20],[129,26,132,24],[129,28,132,26],[130,12,133,10,"finalTicks"],[130,22,133,20],[130,23,133,21,"push"],[130,27,133,25],[130,28,133,26,"tick"],[130,32,133,30],[130,33,133,31],[131,10,134,8],[132,8,135,6],[133,8,136,6],[133,15,136,13,"finalTicks"],[133,25,136,23],[134,6,137,4],[135,4,138,2],[137,4,140,2],[138,4,141,2],[138,11,141,9],[138,13,141,11],[139,2,142,0],[140,0,142,1],[140,3]],"functionMap":{"names":["<global>","getEquidistantTicks","_loop","getSize","getEquidistantPreserveEndTicks","_loop2"],"mappings":"AAA;ACS;cCY;oBCgB;ODK;KDe;CDO;AIC;iBCqB;sBFS;SEK;ODiB"},"hasCjsExports":true},"type":"js/module"}]}