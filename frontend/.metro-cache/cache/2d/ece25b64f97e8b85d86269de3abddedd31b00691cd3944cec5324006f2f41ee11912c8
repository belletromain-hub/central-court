{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"expo-constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":62},"end":{"line":2,"column":39,"index":101}}],"key":"pPv5KzfRT0rL6NCr7G9k0o4d1W8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"generateQuickReplies\", {\n    enumerable: true,\n    get: function () {\n      return generateQuickReplies;\n    }\n  });\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _expoConstants = require(_dependencyMap[1], \"expo-constants\");\n  var Constants = _interopDefault(_expoConstants);\n  // Service AI pour les r√©ponses rapides avec Emergent LLM Key\n\n  const API_URL = Constants.default.expoConfig?.extra?.EXPO_PUBLIC_BACKEND_URL || _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL || '';\n  // Generate AI quick reply suggestions\n  const generateQuickReplies = async context => {\n    try {\n      const response = await fetch(`${API_URL}/api/ai/quick-replies`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(context)\n      });\n      if (!response.ok) {\n        throw new Error('Failed to generate replies');\n      }\n      const data = await response.json();\n      return data.replies || [];\n    } catch (error) {\n      console.error('AI reply generation error:', error);\n      // Return fallback suggestions\n      return getFallbackReplies(context);\n    }\n  };\n\n  // Fallback replies when AI is unavailable\n  const getFallbackReplies = context => {\n    const {\n      channelType,\n      lastMessages\n    } = context;\n    const lastMessage = lastMessages[lastMessages.length - 1]?.toLowerCase() || '';\n\n    // Context-aware fallbacks\n    if (lastMessage.includes('rdv') || lastMessage.includes('rendez-vous') || lastMessage.includes('confirm√©')) {\n      return [{\n        id: 'f1',\n        text: 'Parfait, merci pour la confirmation !',\n        tone: 'friendly'\n      }, {\n        id: 'f2',\n        text: 'Bien not√©, j\\'y serai.',\n        tone: 'brief'\n      }, {\n        id: 'f3',\n        text: 'Excellent, je confirme ma pr√©sence.',\n        tone: 'formal'\n      }];\n    }\n    if (lastMessage.includes('question') || lastMessage.includes('?')) {\n      return [{\n        id: 'f1',\n        text: 'Je te r√©ponds d√®s que possible.',\n        tone: 'friendly'\n      }, {\n        id: 'f2',\n        text: 'Bonne question, laisse-moi v√©rifier.',\n        tone: 'friendly'\n      }, {\n        id: 'f3',\n        text: 'Je reviens vers vous rapidement.',\n        tone: 'formal'\n      }];\n    }\n\n    // Channel-specific defaults\n    if (channelType === 'medical') {\n      return [{\n        id: 'f1',\n        text: 'Merci, je serai l√†.',\n        tone: 'brief'\n      }, {\n        id: 'f2',\n        text: 'Bien not√©, √† demain.',\n        tone: 'friendly'\n      }, {\n        id: 'f3',\n        text: 'Parfait, merci pour l\\'info.',\n        tone: 'friendly'\n      }];\n    }\n    if (channelType === 'technical' || channelType === 'training') {\n      return [{\n        id: 'f1',\n        text: 'Super, on fait comme √ßa !',\n        tone: 'friendly'\n      }, {\n        id: 'f2',\n        text: 'Merci Coach üí™',\n        tone: 'friendly'\n      }, {\n        id: 'f3',\n        text: 'Bien re√ßu, pr√™t pour la session.',\n        tone: 'formal'\n      }];\n    }\n    if (channelType === 'agent') {\n      return [{\n        id: 'f1',\n        text: 'Merci pour le suivi !',\n        tone: 'friendly'\n      }, {\n        id: 'f2',\n        text: 'Parfait, on en reparle.',\n        tone: 'friendly'\n      }, {\n        id: 'f3',\n        text: 'Bien not√©, merci.',\n        tone: 'brief'\n      }];\n    }\n\n    // Generic fallbacks\n    return [{\n      id: 'f1',\n      text: 'Merci !',\n      tone: 'brief'\n    }, {\n      id: 'f2',\n      text: 'Parfait, merci pour l\\'info.',\n      tone: 'friendly'\n    }, {\n      id: 'f3',\n      text: 'Bien re√ßu, je reviens vers vous.',\n      tone: 'formal'\n    }];\n  };\n  var _default = {\n    generateQuickReplies\n  };\n});","lineCount":157,"map":[[12,2,99,0,"Object"],[12,8,99,0],[12,9,99,0,"defineProperty"],[12,23,99,0],[12,24,99,0,"exports"],[12,31,99,0],[13,4,99,0,"enumerable"],[13,14,99,0],[14,4,99,0,"get"],[14,7,99,0],[14,18,99,0,"get"],[14,19,99,0],[15,6,99,0],[15,13,99,0,"_default"],[15,21,99,0],[16,4,99,0],[17,2,99,0],[18,2,21,0,"Object"],[18,8,21,0],[18,9,21,0,"defineProperty"],[18,23,21,0],[18,24,21,0,"exports"],[18,31,21,0],[19,4,21,0,"enumerable"],[19,14,21,0],[20,4,21,0,"get"],[20,7,21,0],[20,18,21,0,"get"],[20,19,21,0],[21,6,21,0],[21,13,21,0,"generateQuickReplies"],[21,33,21,0],[22,4,21,0],[23,2,21,0],[24,2,42,2],[24,6,42,2,"_expoVirtualEnv"],[24,21,42,2],[24,24,42,2,"require"],[24,31,42,2],[24,32,42,2,"_dependencyMap"],[24,46,42,2],[25,2,2,0],[25,6,2,0,"_expoConstants"],[25,20,2,0],[25,23,2,0,"require"],[25,30,2,0],[25,31,2,0,"_dependencyMap"],[25,45,2,0],[26,2,2,0],[26,6,2,0,"Constants"],[26,15,2,0],[26,18,2,0,"_interopDefault"],[26,33,2,0],[26,34,2,0,"_expoConstants"],[26,48,2,0],[27,2,1,0],[29,2,4,0],[29,8,4,6,"API_URL"],[29,15,4,13],[29,18,4,16,"Constants"],[29,27,4,25],[29,28,4,25,"default"],[29,35,4,25],[29,36,4,26,"expoConfig"],[29,46,4,36],[29,48,4,38,"extra"],[29,53,4,43],[29,55,4,45,"EXPO_PUBLIC_BACKEND_URL"],[29,78,4,68],[29,82,4,68,"_expoVirtualEnv"],[29,97,4,68],[29,98,4,68,"env"],[29,101,4,68],[29,102,4,68,"EXPO_PUBLIC_BACKEND_URL"],[29,125,5,51],[29,129,6,16],[29,131,6,18],[30,2,20,0],[31,2,21,7],[31,8,21,13,"generateQuickReplies"],[31,28,21,33],[31,31,21,36],[31,37,21,43,"context"],[31,44,21,66],[31,48,21,94],[32,4,22,2],[32,8,22,6],[33,6,23,4],[33,12,23,10,"response"],[33,20,23,18],[33,23,23,21],[33,29,23,27,"fetch"],[33,34,23,32],[33,35,23,33],[33,38,23,36,"API_URL"],[33,45,23,43],[33,68,23,66],[33,70,23,68],[34,8,24,6,"method"],[34,14,24,12],[34,16,24,14],[34,22,24,20],[35,8,25,6,"headers"],[35,15,25,13],[35,17,25,15],[36,10,26,8],[36,24,26,22],[36,26,26,24],[37,8,27,6],[37,9,27,7],[38,8,28,6,"body"],[38,12,28,10],[38,14,28,12,"JSON"],[38,18,28,16],[38,19,28,17,"stringify"],[38,28,28,26],[38,29,28,27,"context"],[38,36,28,34],[39,6,29,4],[39,7,29,5],[39,8,29,6],[40,6,31,4],[40,10,31,8],[40,11,31,9,"response"],[40,19,31,17],[40,20,31,18,"ok"],[40,22,31,20],[40,24,31,22],[41,8,32,6],[41,14,32,12],[41,18,32,16,"Error"],[41,23,32,21],[41,24,32,22],[41,52,32,50],[41,53,32,51],[42,6,33,4],[43,6,35,4],[43,12,35,10,"data"],[43,16,35,14],[43,19,35,17],[43,25,35,23,"response"],[43,33,35,31],[43,34,35,32,"json"],[43,38,35,36],[43,39,35,37],[43,40,35,38],[44,6,36,4],[44,13,36,11,"data"],[44,17,36,15],[44,18,36,16,"replies"],[44,25,36,23],[44,29,36,27],[44,31,36,29],[45,4,37,2],[45,5,37,3],[45,6,37,4],[45,13,37,11,"error"],[45,18,37,16],[45,20,37,18],[46,6,38,4,"console"],[46,13,38,11],[46,14,38,12,"error"],[46,19,38,17],[46,20,38,18],[46,48,38,46],[46,50,38,48,"error"],[46,55,38,53],[46,56,38,54],[47,6,39,4],[48,6,40,4],[48,13,40,11,"getFallbackReplies"],[48,31,40,29],[48,32,40,30,"context"],[48,39,40,37],[48,40,40,38],[49,4,41,2],[50,2,42,0],[50,3,42,1],[52,2,44,0],[53,2,45,0],[53,8,45,6,"getFallbackReplies"],[53,26,45,24],[53,29,45,28,"context"],[53,36,45,51],[53,40,45,70],[54,4,46,2],[54,10,46,8],[55,6,46,10,"channelType"],[55,17,46,21],[56,6,46,23,"lastMessages"],[57,4,46,36],[57,5,46,37],[57,8,46,40,"context"],[57,15,46,47],[58,4,47,2],[58,10,47,8,"lastMessage"],[58,21,47,19],[58,24,47,22,"lastMessages"],[58,36,47,34],[58,37,47,35,"lastMessages"],[58,49,47,47],[58,50,47,48,"length"],[58,56,47,54],[58,59,47,57],[58,60,47,58],[58,61,47,59],[58,63,47,61,"toLowerCase"],[58,74,47,72],[58,75,47,73],[58,76,47,74],[58,80,47,78],[58,82,47,80],[60,4,49,2],[61,4,50,2],[61,8,50,6,"lastMessage"],[61,19,50,17],[61,20,50,18,"includes"],[61,28,50,26],[61,29,50,27],[61,34,50,32],[61,35,50,33],[61,39,50,37,"lastMessage"],[61,50,50,48],[61,51,50,49,"includes"],[61,59,50,57],[61,60,50,58],[61,73,50,71],[61,74,50,72],[61,78,50,76,"lastMessage"],[61,89,50,87],[61,90,50,88,"includes"],[61,98,50,96],[61,99,50,97],[61,109,50,107],[61,110,50,108],[61,112,50,110],[62,6,51,4],[62,13,51,11],[62,14,52,6],[63,8,52,8,"id"],[63,10,52,10],[63,12,52,12],[63,16,52,16],[64,8,52,18,"text"],[64,12,52,22],[64,14,52,24],[64,53,52,63],[65,8,52,65,"tone"],[65,12,52,69],[65,14,52,71],[66,6,52,82],[66,7,52,83],[66,9,53,6],[67,8,53,8,"id"],[67,10,53,10],[67,12,53,12],[67,16,53,16],[68,8,53,18,"text"],[68,12,53,22],[68,14,53,24],[68,38,53,48],[69,8,53,50,"tone"],[69,12,53,54],[69,14,53,56],[70,6,53,64],[70,7,53,65],[70,9,54,6],[71,8,54,8,"id"],[71,10,54,10],[71,12,54,12],[71,16,54,16],[72,8,54,18,"text"],[72,12,54,22],[72,14,54,24],[72,51,54,61],[73,8,54,63,"tone"],[73,12,54,67],[73,14,54,69],[74,6,54,78],[74,7,54,79],[74,8,55,5],[75,4,56,2],[76,4,58,2],[76,8,58,6,"lastMessage"],[76,19,58,17],[76,20,58,18,"includes"],[76,28,58,26],[76,29,58,27],[76,39,58,37],[76,40,58,38],[76,44,58,42,"lastMessage"],[76,55,58,53],[76,56,58,54,"includes"],[76,64,58,62],[76,65,58,63],[76,68,58,66],[76,69,58,67],[76,71,58,69],[77,6,59,4],[77,13,59,11],[77,14,60,6],[78,8,60,8,"id"],[78,10,60,10],[78,12,60,12],[78,16,60,16],[79,8,60,18,"text"],[79,12,60,22],[79,14,60,24],[79,47,60,57],[80,8,60,59,"tone"],[80,12,60,63],[80,14,60,65],[81,6,60,76],[81,7,60,77],[81,9,61,6],[82,8,61,8,"id"],[82,10,61,10],[82,12,61,12],[82,16,61,16],[83,8,61,18,"text"],[83,12,61,22],[83,14,61,24],[83,52,61,62],[84,8,61,64,"tone"],[84,12,61,68],[84,14,61,70],[85,6,61,81],[85,7,61,82],[85,9,62,6],[86,8,62,8,"id"],[86,10,62,10],[86,12,62,12],[86,16,62,16],[87,8,62,18,"text"],[87,12,62,22],[87,14,62,24],[87,48,62,58],[88,8,62,60,"tone"],[88,12,62,64],[88,14,62,66],[89,6,62,75],[89,7,62,76],[89,8,63,5],[90,4,64,2],[92,4,66,2],[93,4,67,2],[93,8,67,6,"channelType"],[93,19,67,17],[93,24,67,22],[93,33,67,31],[93,35,67,33],[94,6,68,4],[94,13,68,11],[94,14,69,6],[95,8,69,8,"id"],[95,10,69,10],[95,12,69,12],[95,16,69,16],[96,8,69,18,"text"],[96,12,69,22],[96,14,69,24],[96,35,69,45],[97,8,69,47,"tone"],[97,12,69,51],[97,14,69,53],[98,6,69,61],[98,7,69,62],[98,9,70,6],[99,8,70,8,"id"],[99,10,70,10],[99,12,70,12],[99,16,70,16],[100,8,70,18,"text"],[100,12,70,22],[100,14,70,24],[100,36,70,46],[101,8,70,48,"tone"],[101,12,70,52],[101,14,70,54],[102,6,70,65],[102,7,70,66],[102,9,71,6],[103,8,71,8,"id"],[103,10,71,10],[103,12,71,12],[103,16,71,16],[104,8,71,18,"text"],[104,12,71,22],[104,14,71,24],[104,44,71,54],[105,8,71,56,"tone"],[105,12,71,60],[105,14,71,62],[106,6,71,73],[106,7,71,74],[106,8,72,5],[107,4,73,2],[108,4,75,2],[108,8,75,6,"channelType"],[108,19,75,17],[108,24,75,22],[108,35,75,33],[108,39,75,37,"channelType"],[108,50,75,48],[108,55,75,53],[108,65,75,63],[108,67,75,65],[109,6,76,4],[109,13,76,11],[109,14,77,6],[110,8,77,8,"id"],[110,10,77,10],[110,12,77,12],[110,16,77,16],[111,8,77,18,"text"],[111,12,77,22],[111,14,77,24],[111,41,77,51],[112,8,77,53,"tone"],[112,12,77,57],[112,14,77,59],[113,6,77,70],[113,7,77,71],[113,9,78,6],[114,8,78,8,"id"],[114,10,78,10],[114,12,78,12],[114,16,78,16],[115,8,78,18,"text"],[115,12,78,22],[115,14,78,24],[115,30,78,40],[116,8,78,42,"tone"],[116,12,78,46],[116,14,78,48],[117,6,78,59],[117,7,78,60],[117,9,79,6],[118,8,79,8,"id"],[118,10,79,10],[118,12,79,12],[118,16,79,16],[119,8,79,18,"text"],[119,12,79,22],[119,14,79,24],[119,48,79,58],[120,8,79,60,"tone"],[120,12,79,64],[120,14,79,66],[121,6,79,75],[121,7,79,76],[121,8,80,5],[122,4,81,2],[123,4,83,2],[123,8,83,6,"channelType"],[123,19,83,17],[123,24,83,22],[123,31,83,29],[123,33,83,31],[124,6,84,4],[124,13,84,11],[124,14,85,6],[125,8,85,8,"id"],[125,10,85,10],[125,12,85,12],[125,16,85,16],[126,8,85,18,"text"],[126,12,85,22],[126,14,85,24],[126,37,85,47],[127,8,85,49,"tone"],[127,12,85,53],[127,14,85,55],[128,6,85,66],[128,7,85,67],[128,9,86,6],[129,8,86,8,"id"],[129,10,86,10],[129,12,86,12],[129,16,86,16],[130,8,86,18,"text"],[130,12,86,22],[130,14,86,24],[130,39,86,49],[131,8,86,51,"tone"],[131,12,86,55],[131,14,86,57],[132,6,86,68],[132,7,86,69],[132,9,87,6],[133,8,87,8,"id"],[133,10,87,10],[133,12,87,12],[133,16,87,16],[134,8,87,18,"text"],[134,12,87,22],[134,14,87,24],[134,33,87,43],[135,8,87,45,"tone"],[135,12,87,49],[135,14,87,51],[136,6,87,59],[136,7,87,60],[136,8,88,5],[137,4,89,2],[139,4,91,2],[140,4,92,2],[140,11,92,9],[140,12,93,4],[141,6,93,6,"id"],[141,8,93,8],[141,10,93,10],[141,14,93,14],[142,6,93,16,"text"],[142,10,93,20],[142,12,93,22],[142,21,93,31],[143,6,93,33,"tone"],[143,10,93,37],[143,12,93,39],[144,4,93,47],[144,5,93,48],[144,7,94,4],[145,6,94,6,"id"],[145,8,94,8],[145,10,94,10],[145,14,94,14],[146,6,94,16,"text"],[146,10,94,20],[146,12,94,22],[146,42,94,52],[147,6,94,54,"tone"],[147,10,94,58],[147,12,94,60],[148,4,94,71],[148,5,94,72],[148,7,95,4],[149,6,95,6,"id"],[149,8,95,8],[149,10,95,10],[149,14,95,14],[150,6,95,16,"text"],[150,10,95,20],[150,12,95,22],[150,46,95,56],[151,6,95,58,"tone"],[151,10,95,62],[151,12,95,64],[152,4,95,73],[152,5,95,74],[152,6,96,3],[153,2,97,0],[153,3,97,1],[154,2,99,0],[154,6,99,0,"_default"],[154,14,99,0],[154,17,99,15],[155,4,100,2,"generateQuickReplies"],[156,2,101,0],[156,3,101,1],[157,0,101,2],[157,3]],"functionMap":{"names":["<global>","generateQuickReplies","getFallbackReplies"],"mappings":"AAA;oCCoB;CDqB;2BEG;CFoD"},"hasCjsExports":false},"type":"js/module"}]}