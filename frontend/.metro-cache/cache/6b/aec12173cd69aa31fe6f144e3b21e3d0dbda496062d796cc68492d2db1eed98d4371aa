{"dependencies":[{"name":"../../../util/stacks/getStackSeriesIdentifier","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":32,"index":179},"end":{"line":7,"column":88,"index":235}}],"key":"FKJGwAHh/SJkcCe+/FCSx9vwEnE=","exportNames":["*"],"imports":1}},{"name":"../../../util/ChartUtils","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":18,"index":255},"end":{"line":8,"column":53,"index":290}}],"key":"oaV3iW9ELHw25uvlge/j+D08C3U=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.combineDisplayedStackedData = combineDisplayedStackedData;\n  var _getStackSeriesIdentifier = require(_dependencyMap[0], \"../../../util/stacks/getStackSeriesIdentifier\");\n  var _ChartUtils = require(_dependencyMap[1], \"../../../util/ChartUtils\");\n  /**\n   * In a stacked chart, each graphical item has its own data. That data could be either:\n   * - defined on the chart root, in which case the item gets a unique dataKey\n   * - or defined on the item itself, in which case multiple items can share the same dataKey\n   *\n   * That means we cannot use the dataKey as a unique identifier for the item.\n   *\n   * This type represents a single data point in a stacked chart, where each key is a series identifier\n   * and the value is the numeric value for that series using the numerical axis dataKey.\n   */\n\n  function combineDisplayedStackedData(stackedGraphicalItems, _ref, tooltipAxisSettings) {\n    var _ref$chartData = _ref.chartData,\n      chartData = _ref$chartData === void 0 ? [] : _ref$chartData;\n    var allowDuplicatedCategory = tooltipAxisSettings.allowDuplicatedCategory,\n      tooltipDataKey = tooltipAxisSettings.dataKey;\n\n    // A map of tooltip data keys to the stacked data points\n    var knownItemsByDataKey = new Map();\n    stackedGraphicalItems.forEach(item => {\n      var _item$data;\n      // If there is no data on the individual item then we use the root chart data\n      var resolvedData = (_item$data = item.data) !== null && _item$data !== void 0 ? _item$data : chartData;\n      if (resolvedData == null || resolvedData.length === 0) {\n        // if that doesn't work then we skip this item\n        return;\n      }\n      var stackIdentifier = (0, _getStackSeriesIdentifier.getStackSeriesIdentifier)(item);\n      resolvedData.forEach((entry, index) => {\n        var tooltipValue = tooltipDataKey == null || allowDuplicatedCategory ? index : String((0, _ChartUtils.getValueByDataKey)(entry, tooltipDataKey, null));\n        var numericValue = (0, _ChartUtils.getValueByDataKey)(entry, item.dataKey, 0);\n        var curr;\n        if (knownItemsByDataKey.has(tooltipValue)) {\n          curr = knownItemsByDataKey.get(tooltipValue);\n        } else {\n          curr = {};\n        }\n        Object.assign(curr, {\n          [stackIdentifier]: numericValue\n        });\n        knownItemsByDataKey.set(tooltipValue, curr);\n      });\n    });\n    return Array.from(knownItemsByDataKey.values());\n  }\n});","lineCount":55,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0,"Object"],[4,8,3,6],[4,9,3,7,"defineProperty"],[4,23,3,21],[4,24,3,22,"exports"],[4,31,3,29],[4,33,3,31],[4,45,3,43],[4,47,3,45],[5,4,4,2,"value"],[5,9,4,7],[5,11,4,9],[6,2,5,0],[6,3,5,1],[6,4,5,2],[7,2,6,0,"exports"],[7,9,6,7],[7,10,6,8,"combineDisplayedStackedData"],[7,37,6,35],[7,40,6,38,"combineDisplayedStackedData"],[7,67,6,65],[8,2,7,0],[8,6,7,4,"_getStackSeriesIdentifier"],[8,31,7,29],[8,34,7,32,"require"],[8,41,7,39],[8,42,7,39,"_dependencyMap"],[8,56,7,39],[8,108,7,87],[8,109,7,88],[9,2,8,0],[9,6,8,4,"_ChartUtils"],[9,17,8,15],[9,20,8,18,"require"],[9,27,8,25],[9,28,8,25,"_dependencyMap"],[9,42,8,25],[9,73,8,52],[9,74,8,53],[10,2,9,0],[11,0,10,0],[12,0,11,0],[13,0,12,0],[14,0,13,0],[15,0,14,0],[16,0,15,0],[17,0,16,0],[18,0,17,0],[19,0,18,0],[21,2,20,0],[21,11,20,9,"combineDisplayedStackedData"],[21,38,20,36,"combineDisplayedStackedData"],[21,39,20,37,"stackedGraphicalItems"],[21,60,20,58],[21,62,20,60,"_ref"],[21,66,20,64],[21,68,20,66,"tooltipAxisSettings"],[21,87,20,85],[21,89,20,87],[22,4,21,2],[22,8,21,2,"_ref$chartData"],[22,22,21,2],[22,25,23,6,"_ref"],[22,29,23,10],[22,30,22,4,"chartData"],[22,39,22,13],[23,6,22,4,"chartData"],[23,15,22,13],[23,18,22,13,"_ref$chartData"],[23,32,22,13],[23,46,22,16],[23,48,22,18],[23,51,22,18,"_ref$chartData"],[23,65,22,18],[24,4,24,2],[24,8,25,4,"allowDuplicatedCategory"],[24,31,25,27],[24,34,27,6,"tooltipAxisSettings"],[24,53,27,25],[24,54,25,4,"allowDuplicatedCategory"],[24,77,25,27],[25,6,26,13,"tooltipDataKey"],[25,20,26,27],[25,23,27,6,"tooltipAxisSettings"],[25,42,27,25],[25,43,26,4,"dataKey"],[25,50,26,11],[27,4,29,2],[28,4,30,2],[28,8,30,6,"knownItemsByDataKey"],[28,27,30,25],[28,30,30,28],[28,34,30,32,"Map"],[28,37,30,35],[28,38,30,36],[28,39,30,37],[29,4,31,2,"stackedGraphicalItems"],[29,25,31,23],[29,26,31,24,"forEach"],[29,33,31,31],[29,34,31,32,"item"],[29,38,31,36],[29,42,31,40],[30,6,32,4],[30,10,32,8,"_item$data"],[30,20,32,18],[31,6,33,4],[32,6,34,4],[32,10,34,8,"resolvedData"],[32,22,34,20],[32,25,34,23],[32,26,34,24,"_item$data"],[32,36,34,34],[32,39,34,37,"item"],[32,43,34,41],[32,44,34,42,"data"],[32,48,34,46],[32,54,34,52],[32,58,34,56],[32,62,34,60,"_item$data"],[32,72,34,70],[32,77,34,75],[32,82,34,80],[32,83,34,81],[32,86,34,84,"_item$data"],[32,96,34,94],[32,99,34,97,"chartData"],[32,108,34,106],[33,6,35,4],[33,10,35,8,"resolvedData"],[33,22,35,20],[33,26,35,24],[33,30,35,28],[33,34,35,32,"resolvedData"],[33,46,35,44],[33,47,35,45,"length"],[33,53,35,51],[33,58,35,56],[33,59,35,57],[33,61,35,59],[34,8,36,6],[35,8,37,6],[36,6,38,4],[37,6,39,4],[37,10,39,8,"stackIdentifier"],[37,25,39,23],[37,28,39,26],[37,29,39,27],[37,30,39,28],[37,32,39,30,"_getStackSeriesIdentifier"],[37,57,39,55],[37,58,39,56,"getStackSeriesIdentifier"],[37,82,39,80],[37,84,39,82,"item"],[37,88,39,86],[37,89,39,87],[38,6,40,4,"resolvedData"],[38,18,40,16],[38,19,40,17,"forEach"],[38,26,40,24],[38,27,40,25],[38,28,40,26,"entry"],[38,33,40,31],[38,35,40,33,"index"],[38,40,40,38],[38,45,40,43],[39,8,41,6],[39,12,41,10,"tooltipValue"],[39,24,41,22],[39,27,41,25,"tooltipDataKey"],[39,41,41,39],[39,45,41,43],[39,49,41,47],[39,53,41,51,"allowDuplicatedCategory"],[39,76,41,74],[39,79,41,77,"index"],[39,84,41,82],[39,87,41,85,"String"],[39,93,41,91],[39,94,41,92],[39,95,41,93],[39,96,41,94],[39,98,41,96,"_ChartUtils"],[39,109,41,107],[39,110,41,108,"getValueByDataKey"],[39,127,41,125],[39,129,41,127,"entry"],[39,134,41,132],[39,136,41,134,"tooltipDataKey"],[39,150,41,148],[39,152,41,150],[39,156,41,154],[39,157,41,155],[39,158,41,156],[40,8,42,6],[40,12,42,10,"numericValue"],[40,24,42,22],[40,27,42,25],[40,28,42,26],[40,29,42,27],[40,31,42,29,"_ChartUtils"],[40,42,42,40],[40,43,42,41,"getValueByDataKey"],[40,60,42,58],[40,62,42,60,"entry"],[40,67,42,65],[40,69,42,67,"item"],[40,73,42,71],[40,74,42,72,"dataKey"],[40,81,42,79],[40,83,42,81],[40,84,42,82],[40,85,42,83],[41,8,43,6],[41,12,43,10,"curr"],[41,16,43,14],[42,8,44,6],[42,12,44,10,"knownItemsByDataKey"],[42,31,44,29],[42,32,44,30,"has"],[42,35,44,33],[42,36,44,34,"tooltipValue"],[42,48,44,46],[42,49,44,47],[42,51,44,49],[43,10,45,8,"curr"],[43,14,45,12],[43,17,45,15,"knownItemsByDataKey"],[43,36,45,34],[43,37,45,35,"get"],[43,40,45,38],[43,41,45,39,"tooltipValue"],[43,53,45,51],[43,54,45,52],[44,8,46,6],[44,9,46,7],[44,15,46,13],[45,10,47,8,"curr"],[45,14,47,12],[45,17,47,15],[45,18,47,16],[45,19,47,17],[46,8,48,6],[47,8,49,6,"Object"],[47,14,49,12],[47,15,49,13,"assign"],[47,21,49,19],[47,22,49,20,"curr"],[47,26,49,24],[47,28,49,26],[48,10,50,8],[48,11,50,9,"stackIdentifier"],[48,26,50,24],[48,29,50,27,"numericValue"],[49,8,51,6],[49,9,51,7],[49,10,51,8],[50,8,52,6,"knownItemsByDataKey"],[50,27,52,25],[50,28,52,26,"set"],[50,31,52,29],[50,32,52,30,"tooltipValue"],[50,44,52,42],[50,46,52,44,"curr"],[50,50,52,48],[50,51,52,49],[51,6,53,4],[51,7,53,5],[51,8,53,6],[52,4,54,2],[52,5,54,3],[52,6,54,4],[53,4,55,2],[53,11,55,9,"Array"],[53,16,55,14],[53,17,55,15,"from"],[53,21,55,19],[53,22,55,20,"knownItemsByDataKey"],[53,41,55,39],[53,42,55,40,"values"],[53,48,55,46],[53,49,55,47],[53,50,55,48],[53,51,55,49],[54,2,56,0],[55,0,56,1],[55,3]],"functionMap":{"names":["<global>","combineDisplayedStackedData","stackedGraphicalItems.forEach$argument_0","resolvedData.forEach$argument_0"],"mappings":"AAA;ACmB;gCCW;yBCS;KDa;GDC"},"hasCjsExports":true},"type":"js/module"}]}