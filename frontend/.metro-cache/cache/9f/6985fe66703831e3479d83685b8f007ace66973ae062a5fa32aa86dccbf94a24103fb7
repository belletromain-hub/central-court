{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-web-browser","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":47,"index":137}}],"key":"qFWzf28Sq0474idIhFBHQFboHaY=","exportNames":["*"],"imports":1}},{"name":"expo-linking","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":138},"end":{"line":3,"column":40,"index":178}}],"key":"UOn5wJuCXvTT9EneNUmI6H0GQgM=","exportNames":["*"],"imports":1}},{"name":"expo-secure-store","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":179},"end":{"line":4,"column":49,"index":228}}],"key":"BU2XtfznZ4PiVldqd/oueHCCaLo=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"expo-constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":270},"end":{"line":6,"column":39,"index":309}}],"key":"pPv5KzfRT0rL6NCr7G9k0o4d1W8=","exportNames":["*"],"imports":1}},{"name":"react/jsx-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"3suYSPX9nHbHZ1xNTsKXtKj0atE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,_e,_d){\"use strict\";function e(e){if(e&&e.__esModule)return e;var t={};return e&&Object.keys(e).forEach(function(n){var o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,o.get?o:{enumerable:!0,get:function(){return e[n]}})}),t.default=e,t}Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,\"AuthProvider\",{enumerable:!0,get:function(){return y}}),Object.defineProperty(_e,\"useAuth\",{enumerable:!0,get:function(){return p}});var t=r(_d[0]);e(r(_d[1])),e(r(_d[2])),e(r(_d[3]));r(_d[4]);var n,o=r(_d[5]),s=(n=o)&&n.__esModule?n:{default:n},c=r(_d[6]);const u=(0,t.createContext)(void 0),l=s.default.expoConfig?.extra?.EXPO_PUBLIC_BACKEND_URL||\"https://tennis-nexus.preview.emergentagent.com\",h=async()=>localStorage.getItem('session_token'),d=async e=>{localStorage.setItem('session_token',e)},w=async()=>{localStorage.removeItem('session_token')},f=e=>{try{const t=e.match(/[#&]session_id=([^&]+)/);if(t)return t[1];const n=e.match(/[?&]session_id=([^&#]+)/);return n?n[1]:null}catch{return null}},y=({children:e})=>{const[n,o]=(0,t.useState)(null),[s,y]=(0,t.useState)(!0),[p,_]=(0,t.useState)(null);(0,t.useEffect)(()=>{v();{window.location.hash;const e=f(window.location.href);e&&(S(e),window.history.replaceState({},document.title,window.location.pathname))}},[]);const v=async()=>{try{const e=await h();if(!e)return void y(!1);const t=await fetch(`${l}/api/auth/me`,{headers:{Authorization:`Bearer ${e}`}});if(t.ok){const e=await t.json();o(e)}else await w()}catch(e){console.error('Session check error:',e),await w()}finally{y(!1)}},S=async(e,t)=>{y(!0);try{let n=`${l}/api/auth/exchange-session`,s={session_id:e};t&&(n=`${l}/api/auth/register-with-invitation`,s={session_id:e,invitation_code:t});const c=await fetch(n,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(s)});if(!c.ok){const e=await c.json();throw console.error('Session exchange error:',e),new Error(e.detail||'Authentication failed')}{const e=await c.json();await d(e.session_token),o(e.user),_(null)}}catch(e){throw console.error('Session exchange error:',e),e}finally{y(!1)}},P=async()=>{y(!0);try{const e=window.location.origin+'/',t=`https://auth.emergentagent.com/?redirect=${encodeURIComponent(e)}`;window.location.href=t}catch(e){console.error('Login error:',e),y(!1)}};return(0,c.jsx)(u.Provider,{value:{user:n,isLoading:s,isAuthenticated:!!n,login:P,loginWithInvitation:async e=>{_(e),await P()},logout:async()=>{try{const e=await h();e&&await fetch(`${l}/api/auth/logout`,{method:'POST',headers:{Authorization:`Bearer ${e}`}})}catch(e){console.error('Logout error:',e)}finally{await w(),o(null)}},refreshUser:async()=>{await v()}},children:e})},p=()=>{const e=(0,t.useContext)(u);if(!e)throw new Error('useAuth must be used within AuthProvider');return e}});","lineCount":1,"map":[[1,327,74,0,"Object"],[1,334,74,0,"defineProperty"],[1,349,74,0,"_e"],[1,352,74,0],[1,368,74,0,"enumerable"],[1,380,74,0],[1,382,74,0,"get"],[1,386,74,0],[1,404,74,0,"AuthProvider"],[1,405,74,0],[1,409,237,0,"Object"],[1,416,237,0,"defineProperty"],[1,431,237,0,"_e"],[1,434,237,0],[1,445,237,0,"enumerable"],[1,457,237,0],[1,459,237,0,"get"],[1,463,237,0],[1,481,237,0,"useAuth"],[1,482,237,0],[1,486,1,0],[1,490,1,0,"_react"],[1,492,1,0,"r"],[1,494,1,0,"_d"],[1,497,1,0],[1,501,2,0,"_interopNamespace"],[1,503,2,0,"r"],[1,505,2,0,"_d"],[1,508,2,0],[1,513,3,0,"_interopNamespace"],[1,515,3,0,"r"],[1,517,3,0,"_d"],[1,520,3,0],[1,525,4,0,"_interopNamespace"],[1,527,4,0,"r"],[1,529,4,0,"_d"],[1,532,4,0],[1,537,4,49,"r"],[1,539,4,49,"_d"],[1,542,4,49],[1,546,6,0],[1,550],[1,552,6,0,"_expoConstants"],[1,554,6,0,"r"],[1,556,6,0,"_d"],[1,559,6,0],[1,563,6,0,"Constants"],[1,566],[1,568,6,0,"_expoConstants"],[1,572],[1,599,6,39,"_reactJsxRuntime"],[1,601,6,39,"r"],[1,603,6,39,"_d"],[1,606,6,39],[1,610,27,0],[1,616,27,6,"AuthContext"],[1,619,27,20],[1,621,27,20,"createContext"],[1,623,27,33,"createContext"],[1,643,27,63,"undefined"],[1,646,29,6,"API_URL"],[1,648,29,16,"Constants"],[1,650,29,25,"default"],[1,658,29,26,"expoConfig"],[1,670,29,38,"extra"],[1,677,29,45,"EXPO_PUBLIC_BACKEND_URL"],[1,702,29,68],[1,751,34,6,"getSessionToken"],[1,753,34,24,"async"],[1,762,36,11,"localStorage"],[1,775,36,24,"getItem"],[1,783,36,32],[1,800,41,6,"setSessionToken"],[1,802,41,24,"async"],[1,812,43,4,"localStorage"],[1,825,43,17,"setItem"],[1,833,43,25],[1,849,43,42,"token"],[1,853,49,6,"removeSessionToken"],[1,855,49,27,"async"],[1,865,51,4,"localStorage"],[1,878,51,17,"removeItem"],[1,889,51,28],[1,907,58,6,"parseSessionIdFromUrl"],[1,909,58,31,"url"],[1,913,59,2],[1,917,61,4],[1,923,61,10,"hashMatch"],[1,925,61,22,"url"],[1,927,61,26,"match"],[1,933,61,32],[1,959,62,4],[1,962,62,8,"hashMatch"],[1,964,62,19],[1,971,62,26,"hashMatch"],[1,973,62,36],[1,976,65,4],[1,982,65,10,"queryMatch"],[1,984,65,23,"url"],[1,986,65,27,"match"],[1,992,65,33],[1,1019,66,4],[1,1026,66,8,"queryMatch"],[1,1028,66,27,"queryMatch"],[1,1030,66,38],[1,1033,68,11],[1,1037,69,2],[1,1038,69,4],[1,1044,70,4],[1,1051,70,11],[1,1055,71,2],[1,1058,74,13,"AuthProvider"],[1,1060,74,63,"AuthProvider"],[1,1062,74,66,"children"],[1,1077,75,2],[1,1083,75,9,"user"],[1,1085,75,15,"setUser"],[1,1089,75,26],[1,1091,75,26,"useState"],[1,1093,75,34,"useState"],[1,1103,75,48],[1,1110,76,9,"isLoading"],[1,1112,76,20,"setIsLoading"],[1,1116,76,36],[1,1118,76,36,"useState"],[1,1120,76,44,"useState"],[1,1131,76,45],[1,1135,77,9,"pendingInvitation"],[1,1137,77,28,"setPendingInvitation"],[1,1141,77,52],[1,1143,77,52,"useState"],[1,1145,77,60,"useState"],[1,1155,77,76],[1,1162,80,2],[1,1164,80,2,"useEffect"],[1,1166,80,11,"useEffect"],[1,1177,80,12],[1,1182,81,4,"checkExistingSession"],[1,1186,84,31],[1,1187,85,19,"window"],[1,1194,85,26,"location"],[1,1203,85,35,"hash"],[1,1208,85,6],[1,1214,86,12,"sessionId"],[1,1216,86,24,"parseSessionIdFromUrl"],[1,1218,86,46,"window"],[1,1225,86,53,"location"],[1,1234,86,62,"href"],[1,1240,87,10,"sessionId"],[1,1244,88,8,"handleSessionExchange"],[1,1246,88,30,"sessionId"],[1,1249,90,8,"window"],[1,1256,90,15,"history"],[1,1264,90,23,"replaceState"],[1,1277,90,36],[1,1278,90,37],[1,1280,90,40,"document"],[1,1289,90,49,"title"],[1,1295,90,56,"window"],[1,1302,90,63,"location"],[1,1311,90,72,"pathname"],[1,1321,92,4],[1,1324,93,5],[1,1328,95,2],[1,1334,95,8,"checkExistingSession"],[1,1336,95,31,"async"],[1,1346,96,4],[1,1350,97,6],[1,1356,97,12,"token"],[1,1364,97,26,"getSessionToken"],[1,1368,98,6],[1,1372,98,11,"token"],[1,1374,100,8],[1,1386,99,8,"setIsLoading"],[1,1389,99,21],[1,1392,103,6],[1,1398,103,12,"response"],[1,1406,103,29,"fetch"],[1,1412,103,35],[1,1415,103,38,"API_URL"],[1,1431,103,61],[1,1432,104,8,"headers"],[1,1440,104,17],[1,1441,105,10,"Authorization"],[1,1455,105,27],[1,1465,105,37,"token"],[1,1472,109,6],[1,1475,109,10,"response"],[1,1477,109,19,"ok"],[1,1480,109,23],[1,1481,110,8],[1,1487,110,14,"userData"],[1,1495,110,31,"response"],[1,1497,110,40,"json"],[1,1504,111,8,"setUser"],[1,1506,111,16,"userData"],[1,1508,112,6],[1,1520,113,14,"removeSessionToken"],[1,1523,115,4],[1,1524,115,6],[1,1530,115,13,"error"],[1,1533,116,6,"console"],[1,1541,116,14,"error"],[1,1547,116,20],[1,1570,116,44,"error"],[1,1579,117,12,"removeSessionToken"],[1,1582,118,4],[1,1583,118,5],[1,1591,119,6,"setIsLoading"],[1,1594,119,19],[1,1596,120,4],[1,1599,123,8,"handleSessionExchange"],[1,1601,123,32,"async"],[1,1607,123,39,"sessionId"],[1,1609,123,58,"invitationCode"],[1,1614,124,4,"setIsLoading"],[1,1617,124,17],[1,1620,125,4],[1,1624,126,6],[1,1628,126,10,"endpoint"],[1,1630,126,21],[1,1633,126,24,"API_URL"],[1,1663,127,10,"body"],[1,1665,127,22],[1,1666,127,24,"session_id"],[1,1677,127,36,"sessionId"],[1,1680,129,10,"invitationCode"],[1,1684,130,8,"endpoint"],[1,1686,130,19],[1,1689,130,22,"API_URL"],[1,1727,131,8,"body"],[1,1729,131,15],[1,1730,131,17,"session_id"],[1,1741,131,29,"sessionId"],[1,1743,131,40,"invitation_code"],[1,1759,131,57,"invitationCode"],[1,1763,134,6],[1,1769,134,12,"response"],[1,1777,134,29,"fetch"],[1,1783,134,35,"endpoint"],[1,1785,134,45],[1,1786,135,8,"method"],[1,1793,135,16],[1,1800,136,8,"headers"],[1,1808,136,17],[1,1809,136,19],[1,1824,136,35],[1,1844,137,8,"body"],[1,1849,137,14,"JSON"],[1,1854,137,19,"stringify"],[1,1864,137,29,"body"],[1,1869,140,6],[1,1873,140,10,"response"],[1,1875,140,19,"ok"],[1,1878,145,13],[1,1879,146,8],[1,1885,146,14,"error"],[1,1893,146,28,"response"],[1,1895,146,37,"json"],[1,1902,148,8],[1,1908,147,8,"console"],[1,1916,147,16,"error"],[1,1922,147,22],[1,1948,147,49,"error"],[1,1951,148,14],[1,1955,148,18,"Error"],[1,1961,148,24,"error"],[1,1963,148,30,"detail"],[1,1971,148,40],[1,1995,149,6],[1,1996,140,23],[1,1997,141,8],[1,2003,141,14,"data"],[1,2011,141,27,"response"],[1,2013,141,36,"json"],[1,2026,142,14,"setSessionToken"],[1,2028,142,30,"data"],[1,2030,142,35,"session_token"],[1,2045,143,8,"setUser"],[1,2047,143,16,"data"],[1,2049,143,21,"user"],[1,2055,144,8,"setPendingInvitation"],[1,2057,144,29],[1,2062,145,6],[1,2063,150,4],[1,2064,150,6],[1,2070,150,13,"error"],[1,2073,152,6],[1,2079,151,6,"console"],[1,2087,151,14,"error"],[1,2093,151,20],[1,2119,151,47,"error"],[1,2122,152,12,"error"],[1,2123,153,4],[1,2124,153,5],[1,2132,154,6,"setIsLoading"],[1,2135,154,19],[1,2137,155,4],[1,2140,158,8,"login"],[1,2142,158,16,"async"],[1,2152,159,4,"setIsLoading"],[1,2155,159,17],[1,2158,160,4],[1,2162,162,6],[1,2168,162,12,"redirectUrl"],[1,2170,163,10,"window"],[1,2177,163,17,"location"],[1,2186,163,26,"origin"],[1,2193,163,35],[1,2197,166,12,"authUrl"],[1,2199,166,22],[1,2243,166,66,"encodeURIComponent"],[1,2262,166,85,"redirectUrl"],[1,2267,170,8,"window"],[1,2274,170,15,"location"],[1,2283,170,24,"href"],[1,2288,170,31,"authUrl"],[1,2289,186,4],[1,2290,186,6],[1,2296,186,13,"error"],[1,2299,187,6,"console"],[1,2307,187,14,"error"],[1,2313,187,20],[1,2328,187,36,"error"],[1,2331,188,6,"setIsLoading"],[1,2334,188,19],[1,2336,189,4],[1,2339,220,2],[1,2346,221,4],[1,2348,221,4,"_reactJsxRuntime"],[1,2350,221,4,"jsx"],[1,2355,221,5,"AuthContext"],[1,2357,221,17,"Provider"],[1,2366,221,25],[1,2367,222,6,"value"],[1,2373,222,13],[1,2374,223,8,"user"],[1,2381,224,8,"isLoading"],[1,2393,225,8,"isAuthenticated"],[1,2411,225,27,"user"],[1,2413,226,8,"login"],[1,2421,227,8,"loginWithInvitation"],[1,2441,192,30,"async"],[1,2451,193,4,"setPendingInvitation"],[1,2453,193,25,"invitationCode"],[1,2462,194,10,"login"],[1,2467,228,8,"logout"],[1,2474,197,17,"async"],[1,2484,198,4],[1,2488,199,6],[1,2494,199,12,"token"],[1,2502,199,26,"getSessionToken"],[1,2506,200,10,"token"],[1,2515,201,14,"fetch"],[1,2521,201,20],[1,2524,201,23,"API_URL"],[1,2544,201,50],[1,2545,202,10,"method"],[1,2552,202,18],[1,2559,203,10,"headers"],[1,2567,203,19],[1,2568,204,12,"Authorization"],[1,2582,204,29],[1,2592,204,39,"token"],[1,2598,208,4],[1,2599,208,6],[1,2605,208,13,"error"],[1,2608,209,6,"console"],[1,2616,209,14,"error"],[1,2622,209,20],[1,2638,209,37,"error"],[1,2640,210,4],[1,2641,210,5],[1,2655,211,12,"removeSessionToken"],[1,2659,212,6,"setUser"],[1,2661,212,14],[1,2666,213,4],[1,2669,229,8,"refreshUser"],[1,2681,216,22,"async"],[1,2697,217,10,"checkExistingSession"],[1,2703,230,8,"children"],[1,2712,232,7,"children"],[1,2717,237,13,"useAuth"],[1,2719,237,23,"useAuth"],[1,2724,238,2],[1,2730,238,8,"context"],[1,2733,238,18],[1,2735,238,18,"useContext"],[1,2737,238,28,"useContext"],[1,2749,238,29,"AuthContext"],[1,2752,239,2],[1,2756,239,7,"context"],[1,2758,240,4],[1,2764,240,10],[1,2768,240,14,"Error"],[1,2774,240,20],[1,2818,242,2],[1,2825,242,9,"context"],[1,2827,243,2],[1,2830]],"functionMap":{"names":["<global>","getSessionToken","setSessionToken","removeSessionToken","parseSessionIdFromUrl","AuthProvider","useEffect$argument_0","checkExistingSession","handleSessionExchange","login","loginWithInvitation","logout","refreshUser","useAuth"],"mappings":"AAA;wBCiC;CDK;wBEE;CFM;2BGE;CHM;8BIG;CJc;+DKE;YCM;GDa;+BEE;GF0B;gCGE;GHiC;gBIE;GJgC;8BKE;GLG;iBME;GNiB;sBOE;GPE;CLiB;uBaE;CbM"},"hasCjsExports":false},"type":"js/module"}]}