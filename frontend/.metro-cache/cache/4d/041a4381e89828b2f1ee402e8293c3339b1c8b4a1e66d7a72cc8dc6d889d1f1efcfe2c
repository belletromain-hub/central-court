{"dependencies":[{"name":"../../../util/stacks/getStackSeriesIdentifier","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"8tcim1wigp2JfUFNIE9LFfWh6Xk=","exportNames":["*"],"imports":1}},{"name":"../../../util/ChartUtils","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":61,"index":151}}],"key":"f8WHdQKafWIluSROaR+kTmCrduM=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.combineDisplayedStackedData = combineDisplayedStackedData;\n  var _utilStacksGetStackSeriesIdentifier = require(_dependencyMap[0], \"../../../util/stacks/getStackSeriesIdentifier\");\n  var _utilChartUtils = require(_dependencyMap[1], \"../../../util/ChartUtils\");\n  /**\n   * In a stacked chart, each graphical item has its own data. That data could be either:\n   * - defined on the chart root, in which case the item gets a unique dataKey\n   * - or defined on the item itself, in which case multiple items can share the same dataKey\n   *\n   * That means we cannot use the dataKey as a unique identifier for the item.\n   *\n   * This type represents a single data point in a stacked chart, where each key is a series identifier\n   * and the value is the numeric value for that series using the numerical axis dataKey.\n   */\n\n  function combineDisplayedStackedData(stackedGraphicalItems, _ref, tooltipAxisSettings) {\n    var {\n      chartData = []\n    } = _ref;\n    var {\n      allowDuplicatedCategory,\n      dataKey: tooltipDataKey\n    } = tooltipAxisSettings;\n\n    // A map of tooltip data keys to the stacked data points\n    var knownItemsByDataKey = new Map();\n    stackedGraphicalItems.forEach(item => {\n      var _item$data;\n      // If there is no data on the individual item then we use the root chart data\n      var resolvedData = (_item$data = item.data) !== null && _item$data !== void 0 ? _item$data : chartData;\n      if (resolvedData == null || resolvedData.length === 0) {\n        // if that doesn't work then we skip this item\n        return;\n      }\n      var stackIdentifier = (0, _utilStacksGetStackSeriesIdentifier.getStackSeriesIdentifier)(item);\n      resolvedData.forEach((entry, index) => {\n        var tooltipValue = tooltipDataKey == null || allowDuplicatedCategory ? index : String((0, _utilChartUtils.getValueByDataKey)(entry, tooltipDataKey, null));\n        var numericValue = (0, _utilChartUtils.getValueByDataKey)(entry, item.dataKey, 0);\n        var curr;\n        if (knownItemsByDataKey.has(tooltipValue)) {\n          curr = knownItemsByDataKey.get(tooltipValue);\n        } else {\n          curr = {};\n        }\n        Object.assign(curr, {\n          [stackIdentifier]: numericValue\n        });\n        knownItemsByDataKey.set(tooltipValue, curr);\n      });\n    });\n    return Array.from(knownItemsByDataKey.values());\n  }\n});","lineCount":58,"map":[[7,2,15,0,"exports"],[7,9,15,0],[7,10,15,0,"combineDisplayedStackedData"],[7,37,15,0],[7,40,15,0,"combineDisplayedStackedData"],[7,67,15,0],[8,2,1,0],[8,6,1,0,"_utilStacksGetStackSeriesIdentifier"],[8,41,1,0],[8,44,1,0,"require"],[8,51,1,0],[8,52,1,0,"_dependencyMap"],[8,66,1,0],[9,2,2,0],[9,6,2,0,"_utilChartUtils"],[9,21,2,0],[9,24,2,0,"require"],[9,31,2,0],[9,32,2,0,"_dependencyMap"],[9,46,2,0],[10,2,4,0],[11,0,5,0],[12,0,6,0],[13,0,7,0],[14,0,8,0],[15,0,9,0],[16,0,10,0],[17,0,11,0],[18,0,12,0],[19,0,13,0],[21,2,15,7],[21,11,15,16,"combineDisplayedStackedData"],[21,38,15,43,"combineDisplayedStackedData"],[21,39,15,44,"stackedGraphicalItems"],[21,60,15,65],[21,62,15,67,"_ref"],[21,66,15,71],[21,68,15,73,"tooltipAxisSettings"],[21,87,15,92],[21,89,15,94],[22,4,16,2],[22,8,16,6],[23,6,17,4,"chartData"],[23,15,17,13],[23,18,17,16],[24,4,18,2],[24,5,18,3],[24,8,18,6,"_ref"],[24,12,18,10],[25,4,19,2],[25,8,19,6],[26,6,20,4,"allowDuplicatedCategory"],[26,29,20,27],[27,6,21,4,"dataKey"],[27,13,21,11],[27,15,21,13,"tooltipDataKey"],[28,4,22,2],[28,5,22,3],[28,8,22,6,"tooltipAxisSettings"],[28,27,22,25],[30,4,24,2],[31,4,25,2],[31,8,25,6,"knownItemsByDataKey"],[31,27,25,25],[31,30,25,28],[31,34,25,32,"Map"],[31,37,25,35],[31,38,25,36],[31,39,25,37],[32,4,26,2,"stackedGraphicalItems"],[32,25,26,23],[32,26,26,24,"forEach"],[32,33,26,31],[32,34,26,32,"item"],[32,38,26,36],[32,42,26,40],[33,6,27,4],[33,10,27,8,"_item$data"],[33,20,27,18],[34,6,28,4],[35,6,29,4],[35,10,29,8,"resolvedData"],[35,22,29,20],[35,25,29,23],[35,26,29,24,"_item$data"],[35,36,29,34],[35,39,29,37,"item"],[35,43,29,41],[35,44,29,42,"data"],[35,48,29,46],[35,54,29,52],[35,58,29,56],[35,62,29,60,"_item$data"],[35,72,29,70],[35,77,29,75],[35,82,29,80],[35,83,29,81],[35,86,29,84,"_item$data"],[35,96,29,94],[35,99,29,97,"chartData"],[35,108,29,106],[36,6,30,4],[36,10,30,8,"resolvedData"],[36,22,30,20],[36,26,30,24],[36,30,30,28],[36,34,30,32,"resolvedData"],[36,46,30,44],[36,47,30,45,"length"],[36,53,30,51],[36,58,30,56],[36,59,30,57],[36,61,30,59],[37,8,31,6],[38,8,32,6],[39,6,33,4],[40,6,34,4],[40,10,34,8,"stackIdentifier"],[40,25,34,23],[40,28,34,26],[40,32,34,26,"getStackSeriesIdentifier"],[40,67,34,50],[40,68,34,50,"getStackSeriesIdentifier"],[40,92,34,50],[40,94,34,51,"item"],[40,98,34,55],[40,99,34,56],[41,6,35,4,"resolvedData"],[41,18,35,16],[41,19,35,17,"forEach"],[41,26,35,24],[41,27,35,25],[41,28,35,26,"entry"],[41,33,35,31],[41,35,35,33,"index"],[41,40,35,38],[41,45,35,43],[42,8,36,6],[42,12,36,10,"tooltipValue"],[42,24,36,22],[42,27,36,25,"tooltipDataKey"],[42,41,36,39],[42,45,36,43],[42,49,36,47],[42,53,36,51,"allowDuplicatedCategory"],[42,76,36,74],[42,79,36,77,"index"],[42,84,36,82],[42,87,36,85,"String"],[42,93,36,91],[42,94,36,92],[42,98,36,92,"getValueByDataKey"],[42,113,36,109],[42,114,36,109,"getValueByDataKey"],[42,131,36,109],[42,133,36,110,"entry"],[42,138,36,115],[42,140,36,117,"tooltipDataKey"],[42,154,36,131],[42,156,36,133],[42,160,36,137],[42,161,36,138],[42,162,36,139],[43,8,37,6],[43,12,37,10,"numericValue"],[43,24,37,22],[43,27,37,25],[43,31,37,25,"getValueByDataKey"],[43,46,37,42],[43,47,37,42,"getValueByDataKey"],[43,64,37,42],[43,66,37,43,"entry"],[43,71,37,48],[43,73,37,50,"item"],[43,77,37,54],[43,78,37,55,"dataKey"],[43,85,37,62],[43,87,37,64],[43,88,37,65],[43,89,37,66],[44,8,38,6],[44,12,38,10,"curr"],[44,16,38,14],[45,8,39,6],[45,12,39,10,"knownItemsByDataKey"],[45,31,39,29],[45,32,39,30,"has"],[45,35,39,33],[45,36,39,34,"tooltipValue"],[45,48,39,46],[45,49,39,47],[45,51,39,49],[46,10,40,8,"curr"],[46,14,40,12],[46,17,40,15,"knownItemsByDataKey"],[46,36,40,34],[46,37,40,35,"get"],[46,40,40,38],[46,41,40,39,"tooltipValue"],[46,53,40,51],[46,54,40,52],[47,8,41,6],[47,9,41,7],[47,15,41,13],[48,10,42,8,"curr"],[48,14,42,12],[48,17,42,15],[48,18,42,16],[48,19,42,17],[49,8,43,6],[50,8,44,6,"Object"],[50,14,44,12],[50,15,44,13,"assign"],[50,21,44,19],[50,22,44,20,"curr"],[50,26,44,24],[50,28,44,26],[51,10,45,8],[51,11,45,9,"stackIdentifier"],[51,26,45,24],[51,29,45,27,"numericValue"],[52,8,46,6],[52,9,46,7],[52,10,46,8],[53,8,47,6,"knownItemsByDataKey"],[53,27,47,25],[53,28,47,26,"set"],[53,31,47,29],[53,32,47,30,"tooltipValue"],[53,44,47,42],[53,46,47,44,"curr"],[53,50,47,48],[53,51,47,49],[54,6,48,4],[54,7,48,5],[54,8,48,6],[55,4,49,2],[55,5,49,3],[55,6,49,4],[56,4,50,2],[56,11,50,9,"Array"],[56,16,50,14],[56,17,50,15,"from"],[56,21,50,19],[56,22,50,20,"knownItemsByDataKey"],[56,41,50,39],[56,42,50,40,"values"],[56,48,50,46],[56,49,50,47],[56,50,50,48],[56,51,50,49],[57,2,51,0],[58,0,51,1],[58,3]],"functionMap":{"names":["<global>","combineDisplayedStackedData","stackedGraphicalItems.forEach$argument_0","resolvedData.forEach$argument_0"],"mappings":"AAA;OCc;gCCW;yBCS;KDa;GDC"},"hasCjsExports":false},"type":"js/module"}]}