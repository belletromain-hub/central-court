{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"expo-constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":62},"end":{"line":2,"column":39,"index":101}}],"key":"pPv5KzfRT0rL6NCr7G9k0o4d1W8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _Constants$expoConfig; // Service AI pour les r√©ponses rapides avec Emergent LLM Key\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"generateQuickReplies\", {\n    enumerable: true,\n    get: function () {\n      return generateQuickReplies;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _expoVirtualEnv = require(_dependencyMap[1], \"expo/virtual/env\");\n  var _expoConstants = require(_dependencyMap[2], \"expo-constants\");\n  var Constants = _interopDefault(_expoConstants);\n  var API_URL = ((_Constants$expoConfig = Constants.default.expoConfig) == null || (_Constants$expoConfig = _Constants$expoConfig.extra) == null ? void 0 : _Constants$expoConfig.EXPO_PUBLIC_BACKEND_URL) || _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL || '';\n  // Generate AI quick reply suggestions\n  var generateQuickReplies = /*#__PURE__*/function () {\n    var _ref = (0, _asyncToGenerator.default)(function* (context) {\n      try {\n        var response = yield fetch(`${API_URL}/api/ai/quick-replies`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(context)\n        });\n        if (!response.ok) {\n          throw new Error('Failed to generate replies');\n        }\n        var data = yield response.json();\n        return data.replies || [];\n      } catch (error) {\n        console.error('AI reply generation error:', error);\n        // Return fallback suggestions\n        return getFallbackReplies(context);\n      }\n    });\n    return function generateQuickReplies(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  // Fallback replies when AI is unavailable\n  var getFallbackReplies = function getFallbackReplies(context) {\n    var _lastMessages;\n    var channelType = context.channelType,\n      lastMessages = context.lastMessages;\n    var lastMessage = ((_lastMessages = lastMessages[lastMessages.length - 1]) == null ? void 0 : _lastMessages.toLowerCase()) || '';\n\n    // Context-aware fallbacks\n    if (lastMessage.includes('rdv') || lastMessage.includes('rendez-vous') || lastMessage.includes('confirm√©')) {\n      return [{\n        id: 'f1',\n        text: 'Parfait, merci pour la confirmation !',\n        tone: 'friendly'\n      }, {\n        id: 'f2',\n        text: 'Bien not√©, j\\'y serai.',\n        tone: 'brief'\n      }, {\n        id: 'f3',\n        text: 'Excellent, je confirme ma pr√©sence.',\n        tone: 'formal'\n      }];\n    }\n    if (lastMessage.includes('question') || lastMessage.includes('?')) {\n      return [{\n        id: 'f1',\n        text: 'Je te r√©ponds d√®s que possible.',\n        tone: 'friendly'\n      }, {\n        id: 'f2',\n        text: 'Bonne question, laisse-moi v√©rifier.',\n        tone: 'friendly'\n      }, {\n        id: 'f3',\n        text: 'Je reviens vers vous rapidement.',\n        tone: 'formal'\n      }];\n    }\n\n    // Channel-specific defaults\n    if (channelType === 'medical') {\n      return [{\n        id: 'f1',\n        text: 'Merci, je serai l√†.',\n        tone: 'brief'\n      }, {\n        id: 'f2',\n        text: 'Bien not√©, √† demain.',\n        tone: 'friendly'\n      }, {\n        id: 'f3',\n        text: 'Parfait, merci pour l\\'info.',\n        tone: 'friendly'\n      }];\n    }\n    if (channelType === 'technical' || channelType === 'training') {\n      return [{\n        id: 'f1',\n        text: 'Super, on fait comme √ßa !',\n        tone: 'friendly'\n      }, {\n        id: 'f2',\n        text: 'Merci Coach üí™',\n        tone: 'friendly'\n      }, {\n        id: 'f3',\n        text: 'Bien re√ßu, pr√™t pour la session.',\n        tone: 'formal'\n      }];\n    }\n    if (channelType === 'agent') {\n      return [{\n        id: 'f1',\n        text: 'Merci pour le suivi !',\n        tone: 'friendly'\n      }, {\n        id: 'f2',\n        text: 'Parfait, on en reparle.',\n        tone: 'friendly'\n      }, {\n        id: 'f3',\n        text: 'Bien not√©, merci.',\n        tone: 'brief'\n      }];\n    }\n\n    // Generic fallbacks\n    return [{\n      id: 'f1',\n      text: 'Merci !',\n      tone: 'brief'\n    }, {\n      id: 'f2',\n      text: 'Parfait, merci pour l\\'info.',\n      tone: 'friendly'\n    }, {\n      id: 'f3',\n      text: 'Bien re√ßu, je reviens vers vous.',\n      tone: 'formal'\n    }];\n  };\n  var _default = {\n    generateQuickReplies: generateQuickReplies\n  };\n});","lineCount":162,"map":[[4,29,1,0],[5,2,1,0,"Object"],[5,8,1,0],[5,9,1,0,"defineProperty"],[5,23,1,0],[5,24,1,0,"exports"],[5,31,1,0],[6,4,1,0,"value"],[6,9,1,0],[7,2,1,0],[8,2,1,0],[8,11,1,0,"_interopDefault"],[8,27,1,0,"e"],[8,28,1,0],[9,4,1,0],[9,11,1,0,"e"],[9,12,1,0],[9,16,1,0,"e"],[9,17,1,0],[9,18,1,0,"__esModule"],[9,28,1,0],[9,31,1,0,"e"],[9,32,1,0],[10,6,1,0,"default"],[10,13,1,0],[10,15,1,0,"e"],[11,4,1,0],[12,2,1,0],[13,2,99,0,"Object"],[13,8,99,0],[13,9,99,0,"defineProperty"],[13,23,99,0],[13,24,99,0,"exports"],[13,31,99,0],[14,4,99,0,"enumerable"],[14,14,99,0],[15,4,99,0,"get"],[15,7,99,0],[15,18,99,0,"get"],[15,19,99,0],[16,6,99,0],[16,13,99,0,"_default"],[16,21,99,0],[17,4,99,0],[18,2,99,0],[19,2,21,0,"Object"],[19,8,21,0],[19,9,21,0,"defineProperty"],[19,23,21,0],[19,24,21,0,"exports"],[19,31,21,0],[20,4,21,0,"enumerable"],[20,14,21,0],[21,4,21,0,"get"],[21,7,21,0],[21,18,21,0,"get"],[21,19,21,0],[22,6,21,0],[22,13,21,0,"generateQuickReplies"],[22,33,21,0],[23,4,21,0],[24,2,21,0],[25,2,42,2],[25,6,42,2,"_babelRuntimeHelpersAsyncToGenerator"],[25,42,42,2],[25,45,42,2,"require"],[25,52,42,2],[25,53,42,2,"_dependencyMap"],[25,67,42,2],[26,2,42,2],[26,6,42,2,"_asyncToGenerator"],[26,23,42,2],[26,26,42,2,"_interopDefault"],[26,41,42,2],[26,42,42,2,"_babelRuntimeHelpersAsyncToGenerator"],[26,78,42,2],[27,2,42,2],[27,6,42,2,"_expoVirtualEnv"],[27,21,42,2],[27,24,42,2,"require"],[27,31,42,2],[27,32,42,2,"_dependencyMap"],[27,46,42,2],[28,2,2,0],[28,6,2,0,"_expoConstants"],[28,20,2,0],[28,23,2,0,"require"],[28,30,2,0],[28,31,2,0,"_dependencyMap"],[28,45,2,0],[29,2,2,0],[29,6,2,0,"Constants"],[29,15,2,0],[29,18,2,0,"_interopDefault"],[29,33,2,0],[29,34,2,0,"_expoConstants"],[29,48,2,0],[30,2,4,0],[30,6,4,6,"API_URL"],[30,13,4,13],[30,16,4,16],[30,18,4,16,"_Constants$expoConfig"],[30,39,4,16],[30,42,4,16,"Constants"],[30,51,4,25],[30,52,4,25,"default"],[30,59,4,25],[30,60,4,26,"expoConfig"],[30,70,4,36],[30,84,4,36,"_Constants$expoConfig"],[30,105,4,36],[30,108,4,16,"_Constants$expoConfig"],[30,129,4,16],[30,130,4,38,"extra"],[30,135,4,43],[30,156,4,16,"_Constants$expoConfig"],[30,177,4,16],[30,178,4,45,"EXPO_PUBLIC_BACKEND_URL"],[30,201,4,68],[30,206,4,68,"_expoVirtualEnv"],[30,221,4,68],[30,222,4,68,"env"],[30,225,4,68],[30,226,4,68,"EXPO_PUBLIC_BACKEND_URL"],[30,249,5,51],[30,253,6,16],[30,255,6,18],[31,2,20,0],[32,2,21,7],[32,6,21,13,"generateQuickReplies"],[32,26,21,33],[33,4,21,33],[33,8,21,33,"_ref"],[33,12,21,33],[33,19,21,33,"_asyncToGenerator"],[33,36,21,33],[33,37,21,33,"default"],[33,44,21,33],[33,46,21,36],[33,57,21,43,"context"],[33,64,21,66],[33,66,21,94],[34,6,22,2],[34,10,22,6],[35,8,23,4],[35,12,23,10,"response"],[35,20,23,18],[35,29,23,27,"fetch"],[35,34,23,32],[35,35,23,33],[35,38,23,36,"API_URL"],[35,45,23,43],[35,68,23,66],[35,70,23,68],[36,10,24,6,"method"],[36,16,24,12],[36,18,24,14],[36,24,24,20],[37,10,25,6,"headers"],[37,17,25,13],[37,19,25,15],[38,12,26,8],[38,26,26,22],[38,28,26,24],[39,10,27,6],[39,11,27,7],[40,10,28,6,"body"],[40,14,28,10],[40,16,28,12,"JSON"],[40,20,28,16],[40,21,28,17,"stringify"],[40,30,28,26],[40,31,28,27,"context"],[40,38,28,34],[41,8,29,4],[41,9,29,5],[41,10,29,6],[42,8,31,4],[42,12,31,8],[42,13,31,9,"response"],[42,21,31,17],[42,22,31,18,"ok"],[42,24,31,20],[42,26,31,22],[43,10,32,6],[43,16,32,12],[43,20,32,16,"Error"],[43,25,32,21],[43,26,32,22],[43,54,32,50],[43,55,32,51],[44,8,33,4],[45,8,35,4],[45,12,35,10,"data"],[45,16,35,14],[45,25,35,23,"response"],[45,33,35,31],[45,34,35,32,"json"],[45,38,35,36],[45,39,35,37],[45,40,35,38],[46,8,36,4],[46,15,36,11,"data"],[46,19,36,15],[46,20,36,16,"replies"],[46,27,36,23],[46,31,36,27],[46,33,36,29],[47,6,37,2],[47,7,37,3],[47,8,37,4],[47,15,37,11,"error"],[47,20,37,16],[47,22,37,18],[48,8,38,4,"console"],[48,15,38,11],[48,16,38,12,"error"],[48,21,38,17],[48,22,38,18],[48,50,38,46],[48,52,38,48,"error"],[48,57,38,53],[48,58,38,54],[49,8,39,4],[50,8,40,4],[50,15,40,11,"getFallbackReplies"],[50,33,40,29],[50,34,40,30,"context"],[50,41,40,37],[50,42,40,38],[51,6,41,2],[52,4,42,0],[52,5,42,1],[53,4,42,1],[53,20,21,13,"generateQuickReplies"],[53,40,21,33,"generateQuickReplies"],[53,41,21,33,"_x"],[53,43,21,33],[54,6,21,33],[54,13,21,33,"_ref"],[54,17,21,33],[54,18,21,33,"apply"],[54,23,21,33],[54,30,21,33,"arguments"],[54,39,21,33],[55,4,21,33],[56,2,21,33],[56,5,42,1],[58,2,44,0],[59,2,45,0],[59,6,45,6,"getFallbackReplies"],[59,24,45,24],[59,27,45,27],[59,36,45,6,"getFallbackReplies"],[59,54,45,24,"getFallbackReplies"],[59,55,45,28,"context"],[59,62,45,51],[59,64,45,70],[60,4,45,70],[60,8,45,70,"_lastMessages"],[60,21,45,70],[61,4,46,2],[61,8,46,10,"channelType"],[61,19,46,21],[61,22,46,40,"context"],[61,29,46,47],[61,30,46,10,"channelType"],[61,41,46,21],[62,6,46,23,"lastMessages"],[62,18,46,35],[62,21,46,40,"context"],[62,28,46,47],[62,29,46,23,"lastMessages"],[62,41,46,35],[63,4,47,2],[63,8,47,8,"lastMessage"],[63,19,47,19],[63,22,47,22],[63,24,47,22,"_lastMessages"],[63,37,47,22],[63,40,47,22,"lastMessages"],[63,52,47,34],[63,53,47,35,"lastMessages"],[63,65,47,47],[63,66,47,48,"length"],[63,72,47,54],[63,75,47,57],[63,76,47,58],[63,77,47,59],[63,98,47,22,"_lastMessages"],[63,111,47,22],[63,112,47,61,"toLowerCase"],[63,123,47,72],[63,124,47,73],[63,125,47,74],[63,130,47,78],[63,132,47,80],[65,4,49,2],[66,4,50,2],[66,8,50,6,"lastMessage"],[66,19,50,17],[66,20,50,18,"includes"],[66,28,50,26],[66,29,50,27],[66,34,50,32],[66,35,50,33],[66,39,50,37,"lastMessage"],[66,50,50,48],[66,51,50,49,"includes"],[66,59,50,57],[66,60,50,58],[66,73,50,71],[66,74,50,72],[66,78,50,76,"lastMessage"],[66,89,50,87],[66,90,50,88,"includes"],[66,98,50,96],[66,99,50,97],[66,109,50,107],[66,110,50,108],[66,112,50,110],[67,6,51,4],[67,13,51,11],[67,14,52,6],[68,8,52,8,"id"],[68,10,52,10],[68,12,52,12],[68,16,52,16],[69,8,52,18,"text"],[69,12,52,22],[69,14,52,24],[69,53,52,63],[70,8,52,65,"tone"],[70,12,52,69],[70,14,52,71],[71,6,52,82],[71,7,52,83],[71,9,53,6],[72,8,53,8,"id"],[72,10,53,10],[72,12,53,12],[72,16,53,16],[73,8,53,18,"text"],[73,12,53,22],[73,14,53,24],[73,38,53,48],[74,8,53,50,"tone"],[74,12,53,54],[74,14,53,56],[75,6,53,64],[75,7,53,65],[75,9,54,6],[76,8,54,8,"id"],[76,10,54,10],[76,12,54,12],[76,16,54,16],[77,8,54,18,"text"],[77,12,54,22],[77,14,54,24],[77,51,54,61],[78,8,54,63,"tone"],[78,12,54,67],[78,14,54,69],[79,6,54,78],[79,7,54,79],[79,8,55,5],[80,4,56,2],[81,4,58,2],[81,8,58,6,"lastMessage"],[81,19,58,17],[81,20,58,18,"includes"],[81,28,58,26],[81,29,58,27],[81,39,58,37],[81,40,58,38],[81,44,58,42,"lastMessage"],[81,55,58,53],[81,56,58,54,"includes"],[81,64,58,62],[81,65,58,63],[81,68,58,66],[81,69,58,67],[81,71,58,69],[82,6,59,4],[82,13,59,11],[82,14,60,6],[83,8,60,8,"id"],[83,10,60,10],[83,12,60,12],[83,16,60,16],[84,8,60,18,"text"],[84,12,60,22],[84,14,60,24],[84,47,60,57],[85,8,60,59,"tone"],[85,12,60,63],[85,14,60,65],[86,6,60,76],[86,7,60,77],[86,9,61,6],[87,8,61,8,"id"],[87,10,61,10],[87,12,61,12],[87,16,61,16],[88,8,61,18,"text"],[88,12,61,22],[88,14,61,24],[88,52,61,62],[89,8,61,64,"tone"],[89,12,61,68],[89,14,61,70],[90,6,61,81],[90,7,61,82],[90,9,62,6],[91,8,62,8,"id"],[91,10,62,10],[91,12,62,12],[91,16,62,16],[92,8,62,18,"text"],[92,12,62,22],[92,14,62,24],[92,48,62,58],[93,8,62,60,"tone"],[93,12,62,64],[93,14,62,66],[94,6,62,75],[94,7,62,76],[94,8,63,5],[95,4,64,2],[97,4,66,2],[98,4,67,2],[98,8,67,6,"channelType"],[98,19,67,17],[98,24,67,22],[98,33,67,31],[98,35,67,33],[99,6,68,4],[99,13,68,11],[99,14,69,6],[100,8,69,8,"id"],[100,10,69,10],[100,12,69,12],[100,16,69,16],[101,8,69,18,"text"],[101,12,69,22],[101,14,69,24],[101,35,69,45],[102,8,69,47,"tone"],[102,12,69,51],[102,14,69,53],[103,6,69,61],[103,7,69,62],[103,9,70,6],[104,8,70,8,"id"],[104,10,70,10],[104,12,70,12],[104,16,70,16],[105,8,70,18,"text"],[105,12,70,22],[105,14,70,24],[105,36,70,46],[106,8,70,48,"tone"],[106,12,70,52],[106,14,70,54],[107,6,70,65],[107,7,70,66],[107,9,71,6],[108,8,71,8,"id"],[108,10,71,10],[108,12,71,12],[108,16,71,16],[109,8,71,18,"text"],[109,12,71,22],[109,14,71,24],[109,44,71,54],[110,8,71,56,"tone"],[110,12,71,60],[110,14,71,62],[111,6,71,73],[111,7,71,74],[111,8,72,5],[112,4,73,2],[113,4,75,2],[113,8,75,6,"channelType"],[113,19,75,17],[113,24,75,22],[113,35,75,33],[113,39,75,37,"channelType"],[113,50,75,48],[113,55,75,53],[113,65,75,63],[113,67,75,65],[114,6,76,4],[114,13,76,11],[114,14,77,6],[115,8,77,8,"id"],[115,10,77,10],[115,12,77,12],[115,16,77,16],[116,8,77,18,"text"],[116,12,77,22],[116,14,77,24],[116,41,77,51],[117,8,77,53,"tone"],[117,12,77,57],[117,14,77,59],[118,6,77,70],[118,7,77,71],[118,9,78,6],[119,8,78,8,"id"],[119,10,78,10],[119,12,78,12],[119,16,78,16],[120,8,78,18,"text"],[120,12,78,22],[120,14,78,24],[120,30,78,40],[121,8,78,42,"tone"],[121,12,78,46],[121,14,78,48],[122,6,78,59],[122,7,78,60],[122,9,79,6],[123,8,79,8,"id"],[123,10,79,10],[123,12,79,12],[123,16,79,16],[124,8,79,18,"text"],[124,12,79,22],[124,14,79,24],[124,48,79,58],[125,8,79,60,"tone"],[125,12,79,64],[125,14,79,66],[126,6,79,75],[126,7,79,76],[126,8,80,5],[127,4,81,2],[128,4,83,2],[128,8,83,6,"channelType"],[128,19,83,17],[128,24,83,22],[128,31,83,29],[128,33,83,31],[129,6,84,4],[129,13,84,11],[129,14,85,6],[130,8,85,8,"id"],[130,10,85,10],[130,12,85,12],[130,16,85,16],[131,8,85,18,"text"],[131,12,85,22],[131,14,85,24],[131,37,85,47],[132,8,85,49,"tone"],[132,12,85,53],[132,14,85,55],[133,6,85,66],[133,7,85,67],[133,9,86,6],[134,8,86,8,"id"],[134,10,86,10],[134,12,86,12],[134,16,86,16],[135,8,86,18,"text"],[135,12,86,22],[135,14,86,24],[135,39,86,49],[136,8,86,51,"tone"],[136,12,86,55],[136,14,86,57],[137,6,86,68],[137,7,86,69],[137,9,87,6],[138,8,87,8,"id"],[138,10,87,10],[138,12,87,12],[138,16,87,16],[139,8,87,18,"text"],[139,12,87,22],[139,14,87,24],[139,33,87,43],[140,8,87,45,"tone"],[140,12,87,49],[140,14,87,51],[141,6,87,59],[141,7,87,60],[141,8,88,5],[142,4,89,2],[144,4,91,2],[145,4,92,2],[145,11,92,9],[145,12,93,4],[146,6,93,6,"id"],[146,8,93,8],[146,10,93,10],[146,14,93,14],[147,6,93,16,"text"],[147,10,93,20],[147,12,93,22],[147,21,93,31],[148,6,93,33,"tone"],[148,10,93,37],[148,12,93,39],[149,4,93,47],[149,5,93,48],[149,7,94,4],[150,6,94,6,"id"],[150,8,94,8],[150,10,94,10],[150,14,94,14],[151,6,94,16,"text"],[151,10,94,20],[151,12,94,22],[151,42,94,52],[152,6,94,54,"tone"],[152,10,94,58],[152,12,94,60],[153,4,94,71],[153,5,94,72],[153,7,95,4],[154,6,95,6,"id"],[154,8,95,8],[154,10,95,10],[154,14,95,14],[155,6,95,16,"text"],[155,10,95,20],[155,12,95,22],[155,46,95,56],[156,6,95,58,"tone"],[156,10,95,62],[156,12,95,64],[157,4,95,73],[157,5,95,74],[157,6,96,3],[158,2,97,0],[158,3,97,1],[159,2,99,0],[159,6,99,0,"_default"],[159,14,99,0],[159,17,99,15],[160,4,100,2,"generateQuickReplies"],[160,24,100,22],[160,26,100,2,"generateQuickReplies"],[161,2,101,0],[161,3,101,1],[162,0,101,2],[162,3]],"functionMap":{"names":["<global>","generateQuickReplies","getFallbackReplies"],"mappings":"AAA;oCCoB;CDqB;2BEG;CFoD"},"hasCjsExports":false},"type":"js/module"}]}